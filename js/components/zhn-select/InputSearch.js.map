{"version":3,"sources":["../../../src/components/zhn-select/InputSearch.jsx"],"names":["MAX_WITHOUT_ANIMATION","styles","rootDiv","position","display","backgroundColor","width","inputText","background","border","outline","height","paddingLeft","color","paddingRight","fontSize","fontWeight","rootOptionDiv","left","zIndex","borderBottomLeftRadius","borderBottomRightRadius","optionDiv","minHeight","maxHeight","overflow","spinnerCell","top","spinnerFailedCell","borderColor","cursor","inputHr","borderWidth","borderStyle","borderImage","margin","marginLeft","marginBottom","marginRight","arrow_show","itemDiv","paddingTop","paddingBottom","itemOdd","itemEven","optionsFooter","fileredSpan","InputSearch","createClass","getDefaultProps","options","optionName","optionNames","isUpdateOptions","propCaption","getInitialState","domOptionsCache","indexActiveOption","props","_optionName","_optionNames","value","isShowOption","isValidDomOptionsCache","isLocalMode","componentWillReceiveProps","nextProps","_setStateToInit","shouldComponentUpdate","nextState","componentDidUpdate","state","domActiveOption","_getDomForActiveOption","_decorateOfDomActiveOption","_makeVisibleOfDomActiveOption","setState","refs","classList","add","_decorateActiveOption","_undecorateActiveOption","remove","_undecorateOfDomActiveOption","offsetTop","scrollTop","domOptions","_makeVisibleActiveOption","_filterOptionsToState","valueFor","toLowerCase","_caption","filter","option","i","indexOf","_handlerInputChange","event","target","arr","length","push","_startAfterInputAnimation","arrowCell","startAnimation","_stopAfterInputAnimation","stopAnimation","_handlerInputKeyDown","keyCode","item","onSelect","setTimeout","preventDefault","offsetTop2","_handlerToggleOptions","_handlerClickOption","index","renderOptions","ItemOptionComp","_domOptions","map","_styleDiv","Object","assign","bind","_styleOptions","_numberFilteredItems","_numberAllItems","c","render","_styleArrow","isLoading","isLoadingFailed","placeholder","_domAfterInput","_placeholder","onLoadOption","domInputText","focusInput","focus","focusNotValidInput"],"mappings":"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","file":"InputSearch.js","sourcesContent":["import React from 'react';\r\n\r\nimport ArrowCell from './ArrowCell';\r\n\r\nconst MAX_WITHOUT_ANIMATION = 800\r\n\r\nconst styles = {\r\n  rootDiv: {\r\n    position: 'relative',\r\n    display: 'inline-block',\r\n    backgroundColor: '#E1E1CB',\r\n    width: '100%'\r\n  },\r\n  inputText: {\r\n    background: 'transparent none repeat scroll 0 0',\r\n    border: 'medium none',\r\n    outline: 'medium none',\r\n    height: '30px',\r\n    paddingLeft: '10px',\r\n    color: 'green',\r\n    width: '100%',\r\n    paddingRight: '40px',\r\n    fontSize: '16px',\r\n    fontWeight: 'bold'\r\n  },\r\n  rootOptionDiv: {\r\n    position: 'absolute',\r\n    left: 0,\r\n    backgroundColor: '#E1E1CB',\r\n    color: 'green',\r\n    width: '100%',\r\n    //height: '160px',\r\n    zIndex: '10',\r\n    borderBottomLeftRadius : '5px',\r\n    borderBottomRightRadius : '5px'\r\n  },\r\n  optionDiv: {\r\n    width: '100%',\r\n    //height: '160px',\r\n    minHeight: '160px',\r\n    maxHeight: '200px',\r\n    overflow: 'auto'\r\n  },\r\n  spinnerCell : {\r\n    position: 'relative',\r\n    left: '8px',\r\n    top: '4px',\r\n    display: 'inline-block',\r\n    width: '16px',\r\n    height: '16px'\r\n  },\r\n  spinnerFailedCell : {\r\n    position: 'relative',\r\n    left: '8px',\r\n    top: '4px',\r\n    display: 'inline-block',\r\n    width: '16px',\r\n    height: '16px',\r\n    borderColor : '#F44336',\r\n    cursor : 'pointer'\r\n  },\r\n inputHr: {\r\n   borderWidth: 'medium medium 1px',\r\n   borderStyle: 'none none solid',\r\n   borderColor: '#1B75BB',\r\n   borderImage: 'none',\r\n   margin: 0,\r\n   marginLeft: '10px',\r\n   marginBottom: '5px',\r\n   marginRight: '40px'\r\n   //width: '150px'\r\n },\r\n arrow_show : {\r\n    borderColor: '#1B75BB transparent transparent'\r\n },\r\n  itemDiv:{\r\n    cursor: 'pointer',\r\n    paddingTop: '4px',\r\n    paddingLeft: '5px',\r\n    paddingBottom: '4px'\r\n    //lineHeight: '14px'\r\n  },\r\n  itemOdd: {\r\n    backgroundColor: '#C3C3AC'\r\n  },\r\n  itemEven: {\r\n    backgroundColor: '#D5D5BC'\r\n  },\r\n  optionsFooter : {\r\n    backgroundColor: 'silver',\r\n    borderBottomLeftRadius : '5px',\r\n    borderBottomRightRadius : '5px'\r\n  },\r\n  fileredSpan : {\r\n    display: 'inline-block',\r\n    color: 'gray',\r\n    fontWeight : 'bold',\r\n    //height: '20px',\r\n    paddingLeft: '10px',\r\n    paddingTop: '4px',\r\n    paddingBottom : '4px'\r\n  }\r\n}\r\n\r\nconst InputSearch = React.createClass({\r\n  getDefaultProps(){\r\n    return {\r\n      options : [],\r\n      optionName : '',\r\n      optionNames : '',\r\n      isUpdateOptions : false,\r\n      propCaption : 'caption'\r\n    }\r\n  },\r\n\r\n  getInitialState(){\r\n     this.domOptionsCache = null;\r\n     this.indexActiveOption = 0;\r\n\r\n     const { optionName, optionNames, propCaption } = this.props\r\n         , _optionName = (optionName)\r\n                  ? ' ' + optionName\r\n                  : ''\r\n         , _optionNames = (optionNames)\r\n                  ? ' ' + optionNames\r\n                  : (optionName) ? _optionName : '';\r\n\r\n     this.propCaption = propCaption;\r\n\r\n     return {\r\n        value: '',\r\n        isShowOption: false,\r\n        options: this.props.options,\r\n        optionName : _optionName,\r\n        optionNames : _optionNames,\r\n        isValidDomOptionsCache: false,\r\n        isLocalMode: false\r\n     }\r\n  },\r\n\r\n  componentWillReceiveProps(nextProps){\r\n    if (this.props !== nextProps){\r\n      if (this.props.options !== nextProps.options\r\n          || nextProps.isUpdateOptions)\r\n      {\r\n        //New options come from Parent - Clear domCache, Init State\r\n        this._setStateToInit(nextProps.options);\r\n      }\r\n    }\r\n  },\r\n\r\n  shouldComponentUpdate(nextProps, nextState){\r\n    if (this.props !== nextProps || nextProps.isUpdateOptions) {\r\n      nextState.isLocalMode = false;\r\n    } else {\r\n      nextState.isLocalMode = true;\r\n    }\r\n\r\n    return true;\r\n  },\r\n\r\n  componentDidUpdate(){\r\n     //Decorate Active Option\r\n     if (this.state.isShowOption){\r\n       let domActiveOption = this._getDomForActiveOption();\r\n       this._decorateOfDomActiveOption(domActiveOption);\r\n       this._makeVisibleOfDomActiveOption(domActiveOption);\r\n    }\r\n  },\r\n\r\n  _setStateToInit(options){\r\n    this.indexActiveOption = 0;\r\n    this.setState({\r\n      value : '',\r\n      isShowOption : false,\r\n      options : options,\r\n      isValidDomOptionsCache : false\r\n    });\r\n  },\r\n\r\n  _getDomForActiveOption(){\r\n    return this.refs[\"v\"+this.indexActiveOption];\r\n  },\r\n\r\n  _decorateOfDomActiveOption(domActiveOption){\r\n    if (domActiveOption){\r\n      domActiveOption.classList.add(\"option-row__active\");\r\n    }\r\n  },\r\n\r\n  _decorateActiveOption(){\r\n    let domActiveOption = this.refs[\"v\"+this.indexActiveOption];\r\n    domActiveOption.classList.add(\"option-row__active\");\r\n  },\r\n\r\n  _undecorateActiveOption(){\r\n    if (this.refs[\"v\" + this.indexActiveOption]){\r\n      this.refs[\"v\" + this.indexActiveOption].classList.remove(\"option-row__active\");\r\n    }\r\n  },\r\n\r\n  _undecorateOfDomActiveOption(domActiveOption){\r\n     if (domActiveOption){\r\n       domActiveOption.classList.remove(\"option-row__active\");\r\n    }\r\n  },\r\n\r\n  _makeVisibleOfDomActiveOption(domActiveOption){\r\n    if (domActiveOption){\r\n      const offsetTop = domActiveOption.offsetTop;\r\n      const scrollTop = this.domOptions.scrollTop;\r\n      if ( (offsetTop - scrollTop) > 70){\r\n         this.domOptions.scrollTop += (offsetTop - scrollTop - 70);\r\n      }\r\n      if ( (offsetTop - scrollTop) < 0){\r\n        this.domOptions.scrollTop= 0;\r\n      }\r\n    }\r\n  },\r\n\r\n  _makeVisibleActiveOption(){\r\n    let domActiveOption = this.refs[\"v\"+this.indexActiveOption];\r\n\r\n    let offsetTop = domActiveOption.offsetTop;\r\n    let scrollTop = this.domOptions.scrollTop;\r\n    if ( (offsetTop - scrollTop) > 70){\r\n        this.domOptions.scrollTop += (offsetTop - scrollTop - 70);\r\n    }\r\n  },\r\n\r\n  _filterOptionsToState(options, value){\r\n     const valueFor = value.toLowerCase()\r\n         , _caption = this.propCaption;\r\n     return options.filter( (option, i) => {\r\n       return option[_caption].toLowerCase().indexOf(valueFor) !== -1;\r\n     })\r\n  },\r\n\r\n  _handlerInputChange(event){\r\n    const value = event.target.value;\r\n    let arr = [];\r\n    if (value.length !== this.state.value.length){\r\n      if ( value.length>this.state.value.length){\r\n        arr = this._filterOptionsToState(this.state.options, value);\r\n      } else if ( value.length<this.state.value.length) {\r\n        arr = this._filterOptionsToState(this.props.options, value);\r\n      }\r\n      if (arr.length === 0){\r\n        arr.push({[this.propCaption]: 'No results found', value: 'noresult'});\r\n      }\r\n      this._undecorateActiveOption();\r\n      this.indexActiveOption = 0;\r\n      this.setState({\r\n        value : value,\r\n        isShowOption : true,\r\n        isValidDomOptionsCache : false,\r\n        options : arr\r\n      })\r\n    }\r\n  },\r\n\r\n  _startAfterInputAnimation(){\r\n    if (this.state.options.length>MAX_WITHOUT_ANIMATION){\r\n      this.arrowCell.startAnimation();\r\n    }\r\n  },\r\n  _stopAfterInputAnimation(){\r\n    this.arrowCell.stopAnimation();\r\n  },\r\n\r\n  _handlerInputKeyDown(event){\r\n    switch(event.keyCode){\r\n      // enter\r\n      case 13:\r\n         const item = this.state.options[this.indexActiveOption];\r\n\r\n         if (item && item[this.propCaption]){\r\n           this.setState({\r\n             value : item[this.propCaption],\r\n             isShowOption : false,\r\n             isValidDomOptionsCache : true\r\n           });\r\n\r\n           if (item.value !== 'noresult'){\r\n             this.props.onSelect(item);\r\n           } else {\r\n             this.props.onSelect(null);\r\n           }\r\n         }\r\n      break;\r\n      //escape\r\n      case 27:\r\n        if (this.state.isShowOption){\r\n          this.setState({ isShowOption : false });\r\n        } else {\r\n          this._undecorateActiveOption();\r\n          this._setStateToInit(this.props.options);\r\n          this.props.onSelect(null);\r\n        }\r\n      break;\r\n      //down\r\n      case 40:\r\n        if (!this.state.isShowOption){\r\n\r\n          this._startAfterInputAnimation();\r\n          setTimeout(\r\n             () => { this.setState({ isShowOption : true }, this._stopAfterInputAnimation) },\r\n             0\r\n          );\r\n\r\n        } else {\r\n          event.preventDefault();\r\n\r\n          let domActiveOption = this._getDomForActiveOption();\r\n\r\n          if (domActiveOption){\r\n             this._undecorateOfDomActiveOption(domActiveOption);\r\n\r\n             this.indexActiveOption += 1;\r\n             if (this.indexActiveOption>=this.state.options.length){\r\n                this.indexActiveOption = 0;\r\n                this.domOptions.scrollTop = 0;\r\n             }\r\n\r\n             domActiveOption = this._getDomForActiveOption();\r\n             this._decorateOfDomActiveOption(domActiveOption)\r\n\r\n             const offsetTop = this.refs[\"v\"+this.indexActiveOption].offsetTop;\r\n             const scrollTop = this.domOptions.scrollTop;\r\n             if ( (offsetTop - scrollTop) > 70){\r\n                this.domOptions.scrollTop += (offsetTop - scrollTop - 70);\r\n             }\r\n          }\r\n        }\r\n      break;\r\n      //up\r\n      case 38:\r\n        if (this.state.isShowOption){\r\n          event.preventDefault();\r\n\r\n          let domActiveOption = this._getDomForActiveOption();\r\n          if (domActiveOption){\r\n            this._undecorateOfDomActiveOption(domActiveOption);\r\n\r\n            this.indexActiveOption -= 1;\r\n            if (this.indexActiveOption < 0){\r\n              this.indexActiveOption = this.state.options.length - 1;\r\n              const offsetTop2 = this.refs[\"v\"+this.indexActiveOption].offsetTop;\r\n              this.domOptions.scrollTop = offsetTop2;\r\n            }\r\n\r\n            domActiveOption = this._getDomForActiveOption();\r\n            this._decorateOfDomActiveOption(domActiveOption);\r\n\r\n            const offsetTop = domActiveOption.offsetTop;\r\n            const scrollTop = this.domOptions.scrollTop;\r\n            if ( (offsetTop - scrollTop) < 70){\r\n              this.domOptions.scrollTop -= ( 70 - (offsetTop - scrollTop) );\r\n            }\r\n          }\r\n        }\r\n      break;\r\n      default: /*console.log(event.keyCode);*/ return;\r\n    }\r\n  },\r\n\r\n  _handlerToggleOptions(){\r\n    if (this.state.isShowOption){\r\n       this.setState({ isShowOption: false });\r\n    } else {\r\n      this._startAfterInputAnimation()\r\n      setTimeout(\r\n        () => this.setState({ isShowOption: true}, this._stopAfterInputAnimation),\r\n        1\r\n      )\r\n    }\r\n  },\r\n\r\n  _handlerClickOption(item, index, event){\r\n    this.indexActiveOption = index;\r\n    this.setState({\r\n      value : item[this.propCaption],\r\n      isShowOption : false\r\n    });\r\n    this.props.onSelect(item);\r\n  },\r\n\r\n\r\n  renderOptions(){\r\n    const { ItemOptionComp } = this.props\r\n         , { isShowOption, options, isValidDomOptionsCache } = this.state;\r\n\r\n    let _domOptions;\r\n    if (options){\r\n      if (!isValidDomOptionsCache){\r\n         const _caption = this.propCaption;\r\n         _domOptions = options.map((item, index)=>{\r\n            const _styleDiv = (index % 2 === 0)\r\n                     ? styles.itemOdd\r\n                     : styles.itemEven;\r\n            return (\r\n             <div\r\n                key={index}\r\n                ref={\"v\"+index}\r\n                className=\"option-row\"\r\n                style={Object.assign({}, styles.itemDiv, _styleDiv)}\r\n                onClick={this._handlerClickOption.bind(this, item, index)}\r\n              >\r\n                <ItemOptionComp\r\n                   item={item}\r\n                   propCaption={_caption}\r\n                />\r\n            </div>\r\n           )\r\n        });\r\n        this.domOptionsCache = _domOptions;\r\n      } else {\r\n        _domOptions = this.domOptionsCache;\r\n      }\r\n    }\r\n\r\n    const _styleOptions = isShowOption ? {display: 'block'} : { display: 'none'}\r\n        , _numberFilteredItems = (options[0] && (options[0].value !== 'noresult') ) ?\r\n                                  options.length : 0\r\n        , _numberAllItems = this.props.options ? this.props.options.length : 0;\r\n\r\n    return (\r\n        <div style={Object.assign({}, styles.rootOptionDiv, _styleOptions)}>\r\n          <div\r\n             ref={c => this.domOptions = c}\r\n             key=\"1\"\r\n             style={Object.assign({}, styles.optionDiv, _styleOptions)}\r\n           >\r\n            {_domOptions}\r\n          </div>\r\n          <div key=\"2\" style={styles.optionsFooter}>\r\n            <span style={styles.fileredSpan}>\r\n              Filtered {_numberFilteredItems} : {_numberAllItems}\r\n            </span>\r\n          </div>\r\n        </div>\r\n    )\r\n  },\r\n\r\n  render(){\r\n    const {value, isLocalMode, isShowOption } = this.state;\r\n\r\n    const _styleArrow = isShowOption\r\n              ? styles.arrow_show\r\n              : null;\r\n    const _domOptions = (isLocalMode || isShowOption)\r\n              ? this.renderOptions()\r\n              : null;\r\n\r\n    const  {isLoading, isLoadingFailed, placeholder} = this.props\r\n        ,  {optionName, optionNames} = this.state;\r\n\r\n    let _domAfterInput, _placeholder;\r\n    if (!isLoading && !isLoadingFailed){\r\n      _placeholder= (placeholder)\r\n            ? placeholder\r\n            : `Select${optionName}...`;\r\n      _domAfterInput = (\r\n        <ArrowCell\r\n           ref={ (c) => this.arrowCell = c}\r\n           styleArrow={_styleArrow}\r\n           onClick={this._handlerToggleOptions}\r\n        />\r\n      );\r\n    } else if (isLoading){\r\n      _placeholder=`Loading${optionNames}...`;\r\n      _domAfterInput = (\r\n        <span\r\n          style={styles.spinnerCell}\r\n          data-loader=\"circle\"\r\n        >\r\n        </span>\r\n      );\r\n    } else if (isLoadingFailed) {\r\n       _placeholder=`Loading${optionNames} Failed`;\r\n       _domAfterInput = (\r\n        <span\r\n          style={styles.spinnerFailedCell}\r\n          data-loader=\"circle-failed\"\r\n          onClick={this.props.onLoadOption}\r\n         >\r\n        </span>\r\n      )\r\n    }\r\n\r\n\r\n    return (\r\n      <div style={Object.assign({},styles.rootDiv)}>\r\n        <input\r\n           name=\"text\"\r\n           autoComplete=\"new-text\"\r\n           autoCorrect=\"off\"\r\n           autoCapitalize=\"off\"\r\n           spellCheck={false}\r\n           ref={c => this.domInputText = c}\r\n           type=\"text\"\r\n           value={value}\r\n           style={Object.assign({},styles.inputText)}\r\n           placeholder={_placeholder}\r\n           translate={false}\r\n           onChange={this._handlerInputChange}\r\n           onKeyDown={this._handlerInputKeyDown}>\r\n        </input>\r\n        {_domAfterInput}\r\n        <hr style={Object.assign({},styles.inputHr)}></hr>\r\n        {_domOptions}\r\n\r\n      </div>\r\n    )\r\n  },\r\n\r\n  focusInput(){\r\n    this.domInputText.focus();\r\n  },\r\n\r\n  focusNotValidInput(){\r\n    this.domInputText.focus();\r\n  }\r\n\r\n});\r\n\r\nexport default InputSearch\r\n"]}