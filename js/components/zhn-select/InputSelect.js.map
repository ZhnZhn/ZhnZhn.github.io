{"version":3,"sources":["../../../src/components/zhn-select/InputSelect.jsx"],"names":["MAX_WITHOUT_ANIMATION","CL","ROW_ACTIVE","NOT_SELECTED","_fnNoItem","propCaption","inputValue","isWithInput","_inputValue","String","trim","_caption","_toItem","item","_crWidth","width","style","indexOf","S","BLOCK","display","NONE","ROOT_DIV","position","backgroundColor","INPUT_TEXT","background","border","outline","height","paddingLeft","color","paddingRight","fontSize","fontWeight","ROOT_OPTION_DIV","left","zIndex","borderBottomLeftRadius","borderBottomRightRadius","OPTION_DIV","minHeight","maxHeight","paddingBottom","overflow","SPINNER_CELL","top","right","SPINNER_FAILED_CELL","borderColor","cursor","ARROW_SHOW","INPUT_HR","borderWidth","borderStyle","borderImage","margin","marginLeft","marginBottom","marginRight","ITEM_DIV","paddingTop","ITEM_ODD","ITEM_EVEN","OPTIONS_FOOTER","lineHeight","FOOTER_INDEX","FOOTER_BUTTONS","FOOTER_PADDING","ItemOptionDf","InputSelect","props","domOptionsCache","indexActiveOption","optionName","optionNames","_optionNames","state","value","isShowOption","options","isValidDomOptionsCache","isLocalMode","nextProps","isUpdateOptions","_setStateToInit","nextState","comp","_getActiveItemComp","_decorateActiveRowComp","_makeVisibleActiveRowComp","rootStyle","_rootWidthStyle","_crAfterInputEl","afterInputEl","placeholder","_domOptions","renderOptions","domInputText","c","_handleInputChange","_handleInputKeyDown","focus","defaultProps","ItemOptionComp","onSelect","onLoadOption","setState","classList","add","indexNode","textContent","_undecorateActiveRowComp","_comp","remove","offsetTop","scrollTop","optionsComp","_filterOptions","valueFor","toLowerCase","filter","option","i","event","target","tokenLn","token","length","valueLn","arr","push","_startAfterInputAnimation","arrowCell","startAnimation","_stopAfterInputAnimation","stopAnimation","_setShowOptions","_showOptions","ms","isShowOptionAnim","setTimeout","_stepDownOption","prevComp","nextComp","_stepUpOption","bottomComp","keyCode","undefined","preventDefault","_handleToggleOptions","_handleClickItem","index","_refIndexNode","n","_renderOptionsFooter","nFiltered","nAll","clearInput","rootOptionsStyle","_propCaption","map","_styleDiv","bind","_styleOptions","_nFiltered","_nAll","isLoading","isLoadingFailed","_placeholder","_afterInputEl","_styleArrow"],"mappings":"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","file":"InputSelect.js","sourcesContent":["import React, { Component } from 'react';\r\n//import PropTypes from 'prop-types'\r\n\r\nimport ArrowCell from './ArrowCell';\r\nimport SpanBt from './SpanButton';\r\n\r\nconst MAX_WITHOUT_ANIMATION = 800;\r\n\r\nconst CL = {\r\n  ROW_ACTIVE: 'option-row__active',\r\n  NOT_SELECTED: 'not-selected'\r\n};\r\n\r\nconst _fnNoItem = (propCaption, inputValue, isWithInput) => {\r\n  const _inputValue = String(inputValue).trim()\r\n      , _caption = (isWithInput)\r\n           ? `From input: ${_inputValue}`\r\n           : 'No results found';\r\n  return {\r\n    [propCaption]: _caption,\r\n    value: 'noresult',\r\n    inputValue: _inputValue\r\n  };\r\n}\r\n\r\nconst _toItem = (item, propCaption) => {\r\n  return {\r\n    [propCaption]: 'From Input',\r\n    value: item.inputValue\r\n  }\r\n}\r\n\r\nconst _crWidth = (width, style) => {\r\n  return (width)\r\n           ? ((''+width).indexOf('%') !== -1)\r\n                ? { ...style, width: width }\r\n                : { ...style, width: width + 'px'}\r\n           : null;\r\n}\r\n\r\nconst S = {\r\n  BLOCK: {\r\n    display: 'block'\r\n  },\r\n  NONE: {\r\n    display: 'none'\r\n  },\r\n  ROOT_DIV: {\r\n    position: 'relative',\r\n    display: 'inline-block',\r\n    backgroundColor: '#E1E1CB',\r\n    width: '160px'\r\n  },\r\n  INPUT_TEXT: {\r\n    background: 'transparent none repeat scroll 0 0',\r\n    border: 'medium none',\r\n    outline: 'medium none',\r\n    height: '30px',\r\n    paddingLeft: '10px',\r\n    color: 'green',\r\n    //width: '140px',\r\n    width: '100%',\r\n    paddingRight: '40px',\r\n    fontSize: '16px',\r\n    fontWeight: 'bold'\r\n  },\r\n  ROOT_OPTION_DIV: {\r\n    position: 'absolute',\r\n    left: 0,\r\n    backgroundColor: '#E1E1CB',\r\n    color: 'green',\r\n    width: '160px',\r\n    //height: '160px',\r\n    zIndex: '10',\r\n    borderBottomLeftRadius : '5px',\r\n    borderBottomRightRadius : '5px'\r\n  },\r\n  OPTION_DIV: {\r\n    //height: '160px',\r\n    minHeight: '160px',\r\n    //minHeight: '100px',\r\n    maxHeight: '200px',\r\n    paddingBottom: '2px',\r\n    overflow: 'auto'\r\n  },\r\n  SPINNER_CELL: {\r\n    position: 'absolute',\r\n    top: '6px',\r\n    right: '10px',\r\n    display: 'inline-block',\r\n    width: '20px',\r\n    height: '20px'\r\n  },\r\n  SPINNER_FAILED_CELL: {\r\n    position: 'absolute',\r\n    top: '6px',\r\n    right: '10px',\r\n    display: 'inline-block',\r\n    width: '20px',\r\n    height: '20px',\r\n    borderColor : '#F44336',\r\n    cursor : 'pointer'\r\n  },\r\n ARROW_SHOW: {\r\n    borderColor: '#1B75BB transparent transparent'\r\n },\r\n INPUT_HR: {\r\n   borderWidth: 'medium medium 1px',\r\n   borderStyle: 'none none solid',\r\n   borderColor: '#1B75BB',\r\n   borderImage: 'none',\r\n   margin: 0,\r\n   marginLeft: '10px',\r\n   marginBottom: '5px',\r\n   marginRight: '40px'\r\n },\r\n  ITEM_DIV: {\r\n    cursor: 'pointer',\r\n    paddingTop: '6px',\r\n    paddingLeft: '5px',\r\n    paddingBottom: '6px'\r\n    //lineHeight: '14px'\r\n  },\r\n  ITEM_ODD: {\r\n    backgroundColor: '#C3C3AC'\r\n  },\r\n  ITEM_EVEN: {\r\n    backgroundColor: '#D5D5BC'\r\n  },\r\n  OPTIONS_FOOTER: {\r\n    position: 'relative',\r\n    backgroundColor: 'silver',\r\n    borderBottomLeftRadius: '5px',\r\n    borderBottomRightRadius: '5px',\r\n    lineHeight: 1.5\r\n  },\r\n  FOOTER_INDEX: {\r\n    display: 'inline-block',\r\n    color: 'gray',\r\n    fontWeight : 'bold',\r\n    paddingLeft: '10px',\r\n    paddingTop: '4px',\r\n    paddingBottom : '4px'\r\n  },\r\n  FOOTER_BUTTONS: {\r\n    display: 'inline-block',\r\n    position: 'absolute',\r\n    top: '4px',\r\n    right: '8px',\r\n    color: 'black',\r\n    fontWeight: 'bold'\r\n  },\r\n  FOOTER_PADDING: {\r\n    paddingRight: '12px',\r\n  }\r\n};\r\n\r\nconst ItemOptionDf = ({ item, propCaption }) => (\r\n  <span>\r\n    {item[propCaption]}\r\n  </span>\r\n);\r\n\r\nclass InputSelect extends Component {\r\n  /*\r\n  static propTypes = {\r\n     propCaption: PropTypes.string,\r\n     ItemOptionComp: PropTypes.element,\r\n     width: PropTypes.string,\r\n     isShowOptionAnim: PropTypes.bool,\r\n     options: PropTypes.arrayOf(PropTypes.shape({\r\n        caption: PropTypes.string,\r\n        value: PropTypes.oneOfType([\r\n          PropTypes.string,\r\n          PropTypes.number\r\n        ])\r\n     })),\r\n     optionName: PropTypes.string,\r\n     optionNames: PropTypes.string,\r\n     isUpdateOptions: PropTypes.bool,\r\n     placeholder: PropTypes.string,\r\n\r\n     isLoading: PropTypes.bool,\r\n     isLoadingFailed: PropTypes.bool,\r\n\r\n     onSelect: PropTypes.func,\r\n     onLoadOption: PropTypes.func\r\n  }\r\n  */\r\n\r\n  static defaultProps = {\r\n    propCaption: 'caption',\r\n    ItemOptionComp: ItemOptionDf,\r\n    options: [],\r\n    optionName: '',\r\n    optionNames: '',\r\n    isUpdateOptions: false,\r\n    isWithInput: false,\r\n    onSelect: () => {},\r\n    onLoadOption: () => {}\r\n  }\r\n\r\n  constructor(props){\r\n    super()\r\n    this.domOptionsCache = null\r\n    this.indexActiveOption = 0\r\n    this.propCaption = props.propCaption\r\n\r\n    const { optionName, optionNames } = props\r\n        , _optionNames = (optionNames)\r\n              ? optionNames\r\n              : (optionName)\r\n                   ? optionName\r\n                   : '';\r\n\r\n    this.state = {\r\n      value: '',\r\n      isShowOption: false,\r\n      options: props.options,\r\n      optionNames : _optionNames,\r\n      isValidDomOptionsCache: false,\r\n      isLocalMode: false\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps){\r\n    if (this.props !== nextProps){\r\n      if (this.props.options !== nextProps.options\r\n          || nextProps.isUpdateOptions){\r\n        //New options come from Parent - Clear domCache, Init State\r\n        this._setStateToInit(nextProps.options);\r\n      }\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState){\r\n    if (this.props !== nextProps || nextProps.isUpdateOptions) {\r\n      nextState.isLocalMode = false;\r\n    } else {\r\n      nextState.isLocalMode = true;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  componentDidUpdate(){\r\n     //Decorate Active Option\r\n     if (this.state.isShowOption){\r\n       const comp = this._getActiveItemComp();\r\n       this._decorateActiveRowComp(comp);\r\n       this._makeVisibleActiveRowComp(comp);\r\n    }\r\n  }\r\n\r\n  _setStateToInit = (options) => {\r\n    this.indexActiveOption = 0;\r\n    this.setState({\r\n      value : '',\r\n      isShowOption : false,\r\n      options : options,\r\n      isValidDomOptionsCache : false\r\n    });\r\n  }\r\n\r\n  _getActiveItemComp = () => {\r\n    return this[`v${this.indexActiveOption}`];\r\n  }\r\n  _decorateActiveRowComp = (comp) => {\r\n    if (comp){\r\n      comp.classList.add(CL.ROW_ACTIVE);\r\n    }\r\n    if (this.indexNode) {\r\n      this.indexNode.textContent = this.indexActiveOption + 1\r\n    }\r\n  }\r\n  _undecorateActiveRowComp = (comp) => {\r\n     const _comp = !comp\r\n              ? this._getActiveItemComp()\r\n              : comp;\r\n     if (_comp){\r\n      _comp.classList.remove(CL.ROW_ACTIVE);\r\n     }\r\n  }\r\n\r\n  _makeVisibleActiveRowComp = (comp) => {\r\n    if (comp){\r\n      const offsetTop = comp.offsetTop;\r\n      const scrollTop = this.optionsComp.scrollTop;\r\n      if ( (offsetTop - scrollTop) > 70){\r\n         this.optionsComp.scrollTop += (offsetTop - scrollTop - 70);\r\n      }\r\n      if ( (offsetTop - scrollTop) < 0){\r\n        this.optionsComp.scrollTop= 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  _filterOptions = (options, value) => {\r\n     const valueFor = value.toLowerCase()\r\n        ,  _caption = this.propCaption;\r\n     return options.filter( (option, i) => {\r\n       return option[_caption].toLowerCase().indexOf(valueFor) !== -1\r\n     })\r\n  }\r\n\r\n  _handleInputChange = (event) => {\r\n    const token = event.target.value\r\n        , tokenLn = token.length\r\n        , { value } = this.state\r\n        , valueLn = value.length;\r\n    let arr = [];\r\n    if (tokenLn !== valueLn){\r\n      if (tokenLn > valueLn){\r\n        arr = this._filterOptions(this.state.options, token);\r\n      } else if (tokenLn < valueLn) {\r\n        arr = this._filterOptions(this.props.options, token);\r\n      }\r\n      if (arr.length === 0){\r\n        arr.push(_fnNoItem(\r\n          this.propCaption, token, this.props.isWithInput\r\n        ))\r\n      }\r\n      this._undecorateActiveRowComp()\r\n      this.indexActiveOption = 0;\r\n      this.setState({\r\n        value : token,\r\n        isShowOption : true,\r\n        isValidDomOptionsCache : false,\r\n        options : arr\r\n      })\r\n    }\r\n  }\r\n\r\n  _startAfterInputAnimation = () => {\r\n    if (this.state.options.length>MAX_WITHOUT_ANIMATION){\r\n      this.arrowCell.startAnimation()\r\n    }\r\n  }\r\n  _stopAfterInputAnimation = () => {\r\n    this.arrowCell.stopAnimation()\r\n  }\r\n  _setShowOptions = () => {\r\n    this.setState(\r\n      { isShowOption : true },\r\n      this._stopAfterInputAnimation\r\n    )\r\n  }\r\n  _showOptions = (ms) => {\r\n    if (this.props.isShowOptionAnim) {\r\n      this._startAfterInputAnimation()\r\n      setTimeout( this._setShowOptions, ms )\r\n    } else {\r\n      this.setState({ isShowOption: true })\r\n    }\r\n  }\r\n\r\n  _stepDownOption = () => {\r\n    const prevComp = this._getActiveItemComp();\r\n\r\n    if (prevComp){\r\n       this._undecorateActiveRowComp(prevComp);\r\n\r\n       this.indexActiveOption += 1;\r\n       if (this.indexActiveOption>=this.state.options.length){\r\n          this.indexActiveOption = 0;\r\n          this.optionsComp.scrollTop = 0;\r\n       }\r\n\r\n       const nextComp = this._getActiveItemComp();\r\n       this._decorateActiveRowComp(nextComp)\r\n       //this.indexNode.innerHTML = this.indexActiveOption\r\n\r\n       const offsetTop = nextComp.offsetTop\r\n       const scrollTop = this.optionsComp.scrollTop;\r\n       if ( (offsetTop - scrollTop) > 70){\r\n          this.optionsComp.scrollTop += (offsetTop - scrollTop - 70);\r\n       }\r\n    }\r\n  }\r\n\r\n  _stepUpOption = () => {\r\n    const prevComp = this._getActiveItemComp();\r\n    if (prevComp){\r\n      this._undecorateActiveRowComp(prevComp);\r\n\r\n      this.indexActiveOption -= 1;\r\n      if (this.indexActiveOption < 0){\r\n        this.indexActiveOption = this.state.options.length - 1;\r\n        const bottomComp = this._getActiveItemComp()\r\n        this.optionsComp.scrollTop = bottomComp.offsetTop\r\n      }\r\n\r\n      const nextComp = this._getActiveItemComp();\r\n      this._decorateActiveRowComp(nextComp);\r\n      //this.indexNode.innerHTML = this.indexActiveOption\r\n\r\n      const offsetTop = nextComp.offsetTop;\r\n      const scrollTop = this.optionsComp.scrollTop;\r\n      if ( (offsetTop - scrollTop) < 70){\r\n        this.optionsComp.scrollTop -= ( 70 - (offsetTop - scrollTop) );\r\n      }\r\n    }\r\n  }\r\n\r\n  _handleInputKeyDown = (event) => {\r\n    switch(event.keyCode){\r\n      // enter\r\n      case 13:{\r\n         const item = this.state.options[this.indexActiveOption];\r\n\r\n         if (item && item[this.propCaption]){\r\n           this.setState({\r\n             value : item[this.propCaption],\r\n             isShowOption : false,\r\n             isValidDomOptionsCache : true\r\n           });\r\n\r\n           if (item.value !== 'noresult'){\r\n             this.props.onSelect(item);\r\n           } else {\r\n             if (!this.props.isWithInput) {\r\n                this.props.onSelect(undefined);\r\n             } else {\r\n               this.props.onSelect(_toItem(item, this.propCaption))\r\n             }\r\n           }\r\n         }\r\n      break; }\r\n      //escape, delete\r\n      case 27: case 46: {\r\n        event.preventDefault()\r\n        if (this.state.isShowOption){\r\n          this.setState({ isShowOption : false });\r\n        } else {\r\n          this._undecorateActiveRowComp();\r\n          this._setStateToInit(this.props.options);\r\n          this.props.onSelect(undefined);\r\n        }\r\n      break;}\r\n      case 40: //down\r\n        if (!this.state.isShowOption){\r\n          this._showOptions(0)\r\n          //this.setState({ isShowOption : true });\r\n        } else {\r\n          event.preventDefault()\r\n          this._stepDownOption()\r\n        }\r\n        break;\r\n      case 38: //up\r\n        if (this.state.isShowOption){\r\n          event.preventDefault()\r\n          this._stepUpOption()\r\n        }\r\n        break;\r\n      default: return undefined;\r\n    }\r\n  }\r\n\r\n  _handleToggleOptions = () => {\r\n    //this.setState({ isShowOption: !this.state.isShowOption });\r\n    if (this.state.isShowOption){\r\n      this.setState({ isShowOption: false })\r\n    } else {\r\n      this._showOptions(1)\r\n    }\r\n  }\r\n\r\n  _handleClickItem = (item, index, event) => {\r\n    this._undecorateActiveRowComp()\r\n    this.indexActiveOption = index;\r\n    this.setState({\r\n      value : item[this.propCaption],\r\n      isShowOption : false\r\n    });\r\n    this.props.onSelect(item);\r\n  }\r\n\r\n  _refIndexNode = n => this.indexNode = n\r\n\r\n  _renderOptionsFooter = (nFiltered, nAll) => {\r\n    return (\r\n      <div\r\n         className={CL.NOT_SELECTED}\r\n         style={S.OPTIONS_FOOTER}\r\n      >\r\n        <span style={S.FOOTER_INDEX}>\r\n          <span ref={this._refIndexNode} >\r\n            {this.indexActiveOption}\r\n          </span>\r\n          <span>\r\n             : {nFiltered}: {nAll}\r\n          </span>\r\n        </span>\r\n        <span style={S.FOOTER_BUTTONS}>\r\n          <SpanBt\r\n             style={S.FOOTER_PADDING}\r\n             caption=\"Dn\"\r\n             onClick={this._stepDownOption}\r\n          />\r\n          <SpanBt\r\n             style={S.FOOTER_PADDING}\r\n             caption=\"Up\"\r\n             onClick={this._stepUpOption}\r\n          />\r\n          <SpanBt\r\n            caption=\"CL\"\r\n            onClick={this.clearInput}\r\n          />\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderOptions = () => {\r\n    const {\r\n            rootOptionsStyle,\r\n            ItemOptionComp\r\n          } = this.props\r\n        , { isShowOption, options, isValidDomOptionsCache } = this.state\r\n        , _propCaption = this.propCaption;\r\n\r\n    let _domOptions;\r\n    if (options){\r\n      if (!isValidDomOptionsCache){\r\n         _domOptions = options.map((item, index)=>{\r\n           const _styleDiv = (index % 2 === 0)\r\n                     ? S.ITEM_ODD : S.ITEM_EVEN;\r\n\r\n           return (\r\n             <div\r\n                //role=\"option\"\r\n                //aria-selected={this.indexActiveOption === index}\r\n                //tabIndex=\"0\"\r\n                key={index}\r\n                className=\"option-row\"\r\n                style={{...S.ITEM_DIV, ..._styleDiv}}\r\n                ref={c => this[`v${index}`] = c}\r\n                onClick={this._handleClickItem.bind(this, item, index)}\r\n              >\r\n                <ItemOptionComp\r\n                   item={item}\r\n                   propCaption={_propCaption}\r\n                />\r\n                {/*item.caption*/}\r\n            </div>\r\n           )\r\n        });\r\n        this.domOptionsCache = _domOptions;\r\n      } else {\r\n        _domOptions = this.domOptionsCache;\r\n      }\r\n    }\r\n\r\n    const { width } = this.props\r\n        ,  _styleOptions = isShowOption ? S.BLOCK : S.NONE\r\n        , _rootWidthStyle = _crWidth(width, _styleOptions)\r\n        , _nFiltered = (options[0] && (options[0].value !== 'noresult') )\r\n              ? options.length : 0\r\n        , _nAll = this.props.options\r\n              ? this.props.options.length : 0;\r\n\r\n    return (\r\n        <div style={{ ...S.ROOT_OPTION_DIV, ..._rootWidthStyle}}>\r\n          <div\r\n             ref={c => this.optionsComp = c}\r\n             style={{ ...S.OPTION_DIV,\r\n                      ...rootOptionsStyle,\r\n                      ..._rootWidthStyle\r\n                    }}\r\n           >\r\n            {_domOptions}\r\n          </div>\r\n          { this._renderOptionsFooter(_nFiltered, _nAll) }\r\n        </div>\r\n    );\r\n  }\r\n\r\n  _crAfterInputEl = () => {\r\n    const {\r\n           isLoading, isLoadingFailed,\r\n           placeholder, optionName, onLoadOption\r\n         } = this.props\r\n        , { isShowOption, optionNames } = this.state;\r\n\r\n    let _placeholder, _afterInputEl\r\n    if (!isLoading && !isLoadingFailed){\r\n       const _styleArrow = isShowOption\r\n                ? S.ARROW_SHOW\r\n                : null;\r\n      _placeholder = (placeholder)\r\n          ? placeholder\r\n          : `Select ${optionName}...`;\r\n      _afterInputEl = (\r\n         <ArrowCell\r\n           ref={ (c) => this.arrowCell = c}\r\n           styleArrow={_styleArrow}\r\n           onClick={this._handleToggleOptions}\r\n         />\r\n      );\r\n    } else if (isLoading){\r\n      _placeholder = `Loading ${optionNames}...`;\r\n      _afterInputEl = (\r\n        <span\r\n          style={S.SPINNER_CELL}\r\n          data-loader=\"circle\"\r\n        >\r\n        </span>\r\n      );\r\n    } else if (isLoadingFailed) {\r\n       _placeholder=`Loading ${optionNames} Failed`;\r\n       _afterInputEl = (\r\n         <SpanBt\r\n           style={S.SPINNER_FAILED_CELL}\r\n           data-loader=\"circle-failed\"\r\n           onClick={onLoadOption}\r\n         />\r\n       )\r\n    }\r\n    return {\r\n      placeholder: _placeholder,\r\n      afterInputEl: _afterInputEl\r\n    };\r\n  }\r\n\r\n  render(){\r\n    const { rootStyle, width } = this.props\r\n        , { value, isLocalMode, isShowOption } = this.state\r\n        , _rootWidthStyle = _crWidth(width, rootStyle)\r\n        , { afterInputEl, placeholder } = this._crAfterInputEl()\r\n        , _domOptions = (isLocalMode || isShowOption)\r\n              ? this.renderOptions()\r\n              : null;\r\n\r\n    return (\r\n      <div style={{...S.ROOT_DIV, ..._rootWidthStyle}}>\r\n        <input\r\n           ref={c => this.domInputText = c}\r\n           type=\"text\"\r\n           name=\"select\"\r\n           //autoComplete=\"new-select\"\r\n           autoComplete=\"off\"\r\n           autoCorrect=\"off\"\r\n           autoCapitalize=\"off\"\r\n           spellCheck={false}\r\n           value={value}\r\n           style={S.INPUT_TEXT}\r\n           placeholder={placeholder}\r\n           onChange={this._handleInputChange}\r\n           onKeyDown={this._handleInputKeyDown}>\r\n        </input>\r\n        {afterInputEl}\r\n        <hr style={S.INPUT_HR}></hr>\r\n        {_domOptions}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  clearInput = () => {\r\n    const { options, onSelect } = this.props;\r\n    this._undecorateActiveRowComp()\r\n    onSelect(undefined)\r\n    this._setStateToInit(options)\r\n    this.setState({ isShowOption : false });\r\n  }\r\n\r\n  focusInput(){\r\n    this.domInputText.focus()\r\n  }\r\n  focusNotValidInput(){\r\n    this.domInputText.focus()\r\n  }\r\n\r\n}\r\n\r\nexport default InputSelect\r\n"]}