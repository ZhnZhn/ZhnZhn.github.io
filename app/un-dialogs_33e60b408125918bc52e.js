"use strict";(self.webpackChunkweb_app_erc=self.webpackChunkweb_app_erc||[]).push([[538],{2767:(e,o,t)=>{t.r(o),t.d(o,{default:()=>Fo});var r=t(2296);const n="World",a="0",i=`${n} (${a})`,s="all",l="netWgt",c="qty",u="avgPerWeight",p="avgPerQuantity",d={marginTop:42,marginBottom:38},h={type:"spline"},g={type:"spline",visible:!1},m={type:"category",opposite:!1,labels:{y:18},crosshair:null,tickColor:"gray",tickWidth:3,tickLength:7,tickPosition:"outside",gridLineWidth:0},A={lineWidth:0,tickLength:0,startOnTick:!0,endOnTick:!0,minPadding:.05,maxPadding:.05,plotLines:null,labels:{x:3}};var w=t(6460),S=t(2823),v=t(6327),f=t(8849),y=t(5856);const C=(0,t(9550).z)("Website UN Comtrade Data","https://comtradeplus.un.org/TradeFlow/"),x=(e,o)=>o.period?o.subtitle+C():""+C(),b=()=>Object.create(null),T=e=>"AG2"===e.two,j=e=>Math.round((e||{}).primaryValue||0)||0,W=e=>{const{cmdCode:o}=e||{};return(o||"").length<4?o:(0,r.Ax)(o)},P=e=>(0,r.Ax)((e||{}).cmdDescE),L=e=>o=>{return t=(o||{})[e],(0,r.Et)(t)?""+t:(0,r.Ax)(t);var t},z=L("partnerCode"),M=L("reporterCode"),E=L("period"),I=e=>e&&(e.partnerCode===e.partner2Code||0===e.partner2Code);let V;const D=e=>V||((0,r.Ep)(e)?(V=e.reduce(((e,o)=>(o&&o.v&&o.v.length<4&&o.c&&(e[o.v]=(0,r.Ax)(o.c).replace(`(${o.v})`,"").trim()),e)),b()),V):b()),O=(e,o)=>{const t=z(o);return e[t]||t},R=(e,o)=>{const t=M(o);return e[t]||t},k=(e,o,t)=>{const n=[],i=D(o.tradePartners),s=((e,o)=>{const t=(r=e.one,n=e.tfType,"0"===r||"t1"===n?R:O);var r,n;return(e,r,n)=>o(e,t(r,n),n)})(o,t);let l=0,c=0;return e.data.forEach((e=>{const t=j(e),u=z(e);o.one!==a&&u===a&&I(e)?l=t:(0,r.F5)(t)&&I(e)&&(c+=t,n.push(s(t,i,e)))})),[n,l||c]},$=e=>{let{title:o}=e;return o},F=(e,o,t)=>{e.subtitle=(0,S.OJ)(e.subtitle,(0,S.j0)(`(${o}%,`,`${t}%)`))},U=e=>{let{value:o,rg:t=2,measure:r,tp:n,freq:a,chart:i,time:s}=e;return(0,S.ib)(o,t,r,n,a,i,s)},q=(e,o)=>({frequency:o.period||("M"===o.freq?"Monthly":"Annual"),description:x(0,o)}),H=function(e,o){let{itemValue:t,isWi:r=!0}=void 0===o?{}:o;const n=U(e);return{id:n,key:n,itemCaption:e.oneC,itemValue:t&&(0,y.A)(t),itemTime:e.time,isWithoutIndicator:r,dataSource:e.dataSource}},Q="X",B="primaryValue",N=(e,o,t,r,n)=>`${e}https://comtradeapi.un.org/public/v1/preview/C/A/HS/?motCode=0&customsCode=C00&cmdCode=${t}&flowCode=${r}&period=${n}${(e=>e===a?"":`&reporterCode=${e}`)(o)}`,_={getRequestUrl(e){(e=>{if(e._isTs)throw new Error("ERR_10")})(e);const{one:o=a,rg:t=Q}=e;return N(e.proxy,o,e.two,t,e.time)+((e,o)=>T(e)||o===a?"&partnerCode=0&partner2Code=0":"")(e,o)},checkResponse(e){if(e&&(0,r.Ep)(e.data))return e;const{error:o,message:t,statusCode:n}=e||{};if((0,r.O8)(o))throw(0,r.UE)("",o);if((0,r.O8)(t))throw(0,r.UE)("",429===n?`${n}: ${t.replace("in 1 seconds","in 1 minutes")}`:t);throw(0,r.UE)()},addPropsTo(e){const{one:o=a,v:t,rg:n=Q,measure:i=B}=e;if(!o){const o=t.slice(3).split("_");(0,r.kp)(e,{one:o[0],two:o[1]})}(0,r.kp)(e,{rg:n,measure:i})}};var G=t(9270),Y=t(4999),K=t(5385);const X=(e,o,t)=>F(t,...(0,K.KM)(e,o)),J=(e,o,t)=>({value:e,label:o,title:E(t)}),Z=(e,o)=>{const[t,n]=T(o)?((e,o)=>{const t=[];let n=0;return e.data.forEach((e=>{const o=j(e);(0,r.F5)(o)&&(n+=o,t.push({value:o,label:W(e)+" "+P(e),title:E(e)}))})),X(t,n,o),[t,n]})(e,o):((e,o)=>{const[t,r]=k(e,o,J);return X(t,r,o),[t,r]})(e,o);return(0,G.A)((0,Y.Qn)(t),(0,Y.Kl)($(o),o.subtitle),(0,Y.YT)({info:q(0,o),zhConfig:H(o,{itemValue:n})}),Y.qP)};var ee=t(7229);const oe=(e,o,t,r,n)=>{const a=$(o);return(0,G.A)((0,Y.mw)("BAR",r),(0,Y.Kl)(a,o.subtitle),(0,Y.YT)({info:q(0,o),zhConfig:H(o,{itemValue:n,isWi:!1})}),(0,Y.vt)(0,{data:t,name:a}),Y.qP)},te=(0,ee.C)((()=>fetch("./data/uncomtrade/hs-chapters.json").then((e=>{if(!e.ok)throw new Error("Network response was not OK");return e.json()})).then((e=>(e||{}).hm)).catch((()=>{}))),!0),re=(e,o,t)=>{(0,f._u)(e),F(t,...(0,K.FE)({data:e,total:o,propName:"y"}))},ne=(e,o)=>te().then((t=>((e,o,t)=>{const n=!!e,a=[];let i=0;return o.data.forEach((o=>{const t=j(o);if((0,r.F5)(t)){const r=W(o),s=n&&e[r];i+=t,a.push({c:s?r+" "+s:r,y:t})}})),re(a,i,t),[a,(0,v.mm)(a),i]})(t,e,o))).then((t=>oe(e,o,...t))),ae=(e,o)=>({y:e,c:o}),ie=(e,o)=>{const[t,r]=k(e,o,ae);return re(t,r,o),oe(0,o,t,(0,v.mm)(t),r)},se=(e,o)=>(T(o)?ne:ie)(e,o);var le=t(3730),ce=t(4850),ue=t(3069),pe=t(2096),de=t(5248),he=t(7294);const ge=()=>Object.create(null),me="primaryValue",Ae=(e,o)=>({y:e,forSort:void 0!==o?o:e}),we=(e,o)=>{const t=o[e],r=0!==t?t:o.TradeValue?void 0:0;return Ae(r)},Se=we.bind(null,l),ve=we.bind(null,c),fe=(e,o)=>{const t=j(o),n=o[e],a=n&&null!=t?(0,r.W7)(t/n,2):void 0;return Ae(a,n)},ye=fe.bind(null,l),Ce=fe.bind(null,c),xe={fDf:e=>e===me?e=>Ae(j(e)):o=>Ae(o[e]),[l]:Se,[c]:ve,[u]:ye,[p]:Ce},be=e=>{const o=e&&e.length;return o&&o>0?e[o-1].forSort:void 0},Te=function(e,o,t){void 0===o&&(o="partnerCode"),void 0===t&&(t=me);const r=ge(),n=ge(),a=(e=>{const o=xe[e]||xe.fDf(e);return e=>({name:e.period,c:e.period,...o(e)})})(t);let i;return e.forEach((e=>{if(i=a(e),null!=i.y){const t=e[o];void 0===r[t]&&(r[t]=[]),r[t].push(i);const a=e.period;void 0===n[a]&&(n[a]=a)}})),[r,(s=n,(0,le.Co)(s).map((e=>s[e])).sort())];var s},je=(e,o)=>t=>{const{name:n}=t,a=e[n],i=a[a.length-1],s=i?(0,r.W7)(i.y/o*100,1)+"%":"";return{...t,name:s+" "+n}},We=(e,o)=>-1===e.indexOf(o),Pe=e=>{let o,t=0;for(o in e)if(We(o,", nes")&&We(o,n)){const r=e[o];t+=r[r.length-1].y}return t},Le=Object.assign,ze=e=>({fillColor:e,lineColor:e,lineWidth:1,radius:4,symbol:"circle"}),Me=e=>{let{config:o,hm:t,name:r,i:n,color:a,seriaOption:i,isShow:s=!1}=e;const{legend:l}=o.zhConfig,c=a||(0,pe.v)(n),u={color:c,marker:ze(c)},p=null!==i?s?{...h,...u}:{...g,...u}:null;(0,de.M$)(o,t[r],n,r,p),l.push((0,he.f)(n,c,r,s))},Ee=e=>{let{config:o,hm:t,fromIndex:r}=e,n=r;(e=>(0,f.GY)((0,le.Co)(e).map((o=>({value:be(e[o]),name:o})))))(t).forEach(((e,r)=>{if(r>=n){const r=e.name;Me({config:o,hm:t,name:r,i:n,isShow:n<6}),n++}}))},Ie=(e,o)=>(e||{}).period-(o||{}).period,Ve=(e,o,t)=>{const{data:r}=o,{one:a,measure:l}=t,c=a===s?"reporterCode":"partnerCode",[d,h]=Te(r.sort(Ie),c,l),g=D(t.tradePartners),m=(A=d,w=g,(0,le.Co)(A).reduce(((e,o)=>(e[w[o]||o]=A[o],e)),b()));var A,w;m[i]&&a!==s?(Me({config:e,hm:m,i:0,name:i,color:"#7cb5ec",seriaOption:null,isShow:!0}),Ee({config:e,hm:m,fromIndex:1})):Ee({config:e,hm:m,fromIndex:0});const{legend:S}=e.zhConfig;e.zhConfig.legend=a===s?((e,o,t)=>{const r=Pe(o),n=je(o,r);return 0!==r&&t!==u&&t!==p?e.map(n):e})(S,m,l):((e,o)=>{const t=o[n],r=t?t[t.length-1].y:Pe(o),a=je(o,r);return 0!==r&&null!=r?e.map(a):e})(S,m),Le(e.xAxis,{categories:h})},De=e=>{const o=""+e,t=4===o.length?o:o.slice(0,4)+"-"+o.slice(4,6);return(0,r.cY)(t)},Oe=(e,o)=>{const t=((e,o)=>{const{title:t,subtitle:r}=o;return(0,G.A)((0,Y.hN)(),(0,Y.YT)({chart:d,xAxis:m,yAxis:A}),(0,Y.Kl)(t,r),(0,Y.PK)(ue.Gr),(0,Y.YT)({info:q(0,o),zhConfig:H(o)}),(0,Y.$n)([],!0),Y.qP)})(0,o);return Ve(t,e,o),1===(t.series||[]).length&&(e=>{const{series:o}=e,{data:t}=o[0],n=(t||[]).map((e=>[De(e.c),e.y]));o[0].data=n,o[0].type="spline",e.xAxis.categories=void 0,e.xAxis.type="datetime",e.tooltip=(0,ce.Gs)(ue.BA),e.valueMoving=(0,r.Y1)(n),e.zhConfig.isWithoutIndicator=!1})(t),t},Re=e=>(o,t)=>({config:e(o,t)}),ke=e=>({toConfig:Re((0,v.vD)(e)?Z:(0,v.s9)(e)?Oe:se)});const $e={api:_,adapter:(0,t(4514).GT)({getRoute:ke,crDfKey:U})};var Fe=t(1315),Ue=t(2401),qe=t(4575),He=t(4867),Qe=t(4250),Be=t(3057);const Ne=()=>{const[e,o]=(0,He.A)(!1),t=(0,Fe.hb)((()=>{o(!1)}),[o]);return[e,o,t]};var _e=t(4927),Ge=t(4428),Ye=t(972),Ke=t(6223),Xe=t(8353),Je=t(4848);const Ze=e=>{let{isShow:o,configs:t,onClose:r}=e;return(0,Je.jsx)(Ye.A,{isShow:o,className:Xe.ND,style:Xe.lM,onClose:r,children:(t||[]).map((e=>(0,Je.jsx)(Ke.A,{style:Xe.v$,color:Xe.Ic,caption:e[0],value:e[1],onToggle:e[2]},e[0])))})},eo=function(e,o){void 0===o&&(o=0);const t=e[o];return[t,`Default: ${(0,Ue.eW)(t)}`]},oo=[{c:"Export Value",v:{rg:"X",measure:"primaryValue"}},{c:"Export Weight",v:{rg:"X",measure:"netWgt"}},{c:"Export Quantity",v:{rg:"X",measure:"qty"}},{c:"Export Average Value Per Weight",v:{rg:"X",measure:"avgPerWeight"}},{c:"Export Average Value Per Quantity",v:{rg:"X",measure:"avgPerQuantity"}},{c:"Import Value",v:{rg:"M",measure:"primaryValue"}},{c:"Import Weight",v:{rg:"M",measure:"netWgt"}},{c:"Import Quantity",v:{rg:"M",measure:"qty"}},{c:"Import Average Value Per Weight",v:{rg:"M",measure:"avgPerWeight"}},{c:"Import Average Value Per Quantity",v:{rg:"M",measure:"avgPerQuantity"}}],[to,ro]=eo(oo),[no={c:"World",v:"0"},ao]=eo([{c:"World",v:"0"}]),io=[{c:"Annual",v:"A"},{c:"Monthly",v:"M"}],[so,lo]=eo(io),co=(e,o)=>({caption:e,value:o}),uo=[co("Bar (60, 90): By Partners",w.zM),co("Tree Map (60, 90): By Partners",w.uT),co("Dots: By Partners",w.bR)],[po,ho]=eo(uo),[go]=(0,Ge.A)("Y",2),[mo,Ao]=eo(go,1),wo=e=>`./data/uncomtrade/${e}.json`,So=(0,qe.A)((e=>{const{isShow:o,caption:t,oneURI:r,tpURI:n,dfProps:a,msgOnNotSelected:i,toTopLayer:s,onAbout:l,loadFn:c,onLoad:u,onShow:p,onClose:d}=e,{dfId:h}=a||{},[g,m]=(0,Fe.J0)(po),[A,w,S]=Ne(),[v,f,y,C,x,b,T]=(0,Be.A)({onAbout:l,onClose:d,toggleInputs:w}),[j,W]=(0,He.A)(!0),[P,L]=(0,He.A)(!0),[z,M]=(0,He.A)(!1),E=(0,Fe.li)(),I=(0,Fe.li)(),V=(0,Fe.li)(),[D,O]=(0,Qe.A)(no,no),[R,k]=(0,Qe.A)(to,to),$=(0,Qe.A)()[1],[F,U]=(0,Qe.A)(mo,mo),[q,H]=(0,Qe.A)(so,so),Q=(0,Fe.hb)((()=>{const o=(0,Fe.ZC)(I),{msg:t=[]}=o.getValidation(),r=O(),n=(0,Ue.z)(r),a=$(),i=(0,Ue.z)(a),s=H();if("all"===n&&"all"===i&&t.push("Query All to All is too complex"),"all"===n&&"M"===(0,Ue.z)(s)&&t.push("Query All Monthly is too complex"),0===t.length){const{one:t,two:n}=o.getValues();u(c(e,{...(0,Fe.y5)(V),one:r,two:t,three:n,tradeFlow:k(),tradePartner:a,freq:s,chType:g,time:(0,Ue.z)(U()),tradePartners:(0,Fe.UU)(E)}))}b(t)}),[g]);return(0,Je.jsxs)(_e.A.DraggableDialog,{isShow:o,caption:t,menuModel:y,toTopLayer:s,onLoad:Q,onShow:p,onClose:T,children:[(0,Je.jsx)(_e.A.Toolbar,{isShow:v,buttons:C}),(0,Je.jsx)(Ze,{isShow:A,configs:[["Heading",j,W],["Trade Flow",P,L],["Chart",z,M]],onClose:S}),(0,Je.jsx)(_e.A.SelectWithLoad,{isShow:o,isShowLabels:f,uri:r,caption:"Reporter",placeholder:ao,onSelect:D}),(0,Je.jsx)(_e.A.ShowHide,{isShow:!1,children:(0,Je.jsx)(_e.A.SelectWithLoad,{refEl:E,isShowLabels:f,uri:n,caption:"Partner",placeholder:"Default: World"})}),(0,Je.jsx)(_e.A.ShowHide,{isShow:j,children:(0,Je.jsx)(_e.A.SelectOneTwo,{refEl:I,isShow:o,isShowLabels:f,uri:wo(h),oneCaption:"Heading",twoCaption:"Subheading",msgOnNotSelected:i})}),(0,Je.jsx)(_e.A.ShowHide,{isShow:P,children:(0,Je.jsx)(_e.A.RowInputSelect,{isShowLabels:f,caption:"Trade Flow",placeholder:ro,propCaption:"c",options:oo,onSelect:R})}),(0,Je.jsx)(_e.A.ShowHide,{isShow:!1,children:(0,Je.jsx)(_e.A.RowInputSelect,{isShowLabels:f,caption:"Frequency",placeholder:lo,propCaption:"c",options:io})}),(0,Je.jsx)(_e.A.RowChartDate,{isShowChart:z,isShowDate:z,refSeriaColor:V,chartType:g,isShowLabels:f,chartOptions:uo,chartDefault:ho,onSelectChart:m,dateDefault:Ao,dateOptions:go,onSelectDate:F}),(0,Je.jsx)(_e.A.ValidationMessages,{validationMessages:x})]})})),vo=[{c:"Bar (60, 90): By Partners",v:w.zM},{c:"TreeMap (60, 90): By Partners",v:w.uT}],fo=vo,[yo,Co]=eo(vo),xo=(e,o)=>"0"===(0,Ue.z)(e)&&"TOTAL"===(0,Ue.z)(o)?fo:vo,bo=(e,o)=>{const[t,r]=(0,Qe.A)(yo,yo),[n,a]=(0,Fe.J0)(!0),i=(0,Fe.hb)((e=>{t(e)}),[]),[s,l]=(0,Fe.J0)(!0),[c,u]=(0,Fe.J0)((()=>xo(e(),o()))),p=(0,Fe.hb)((()=>{const r=e(),n=o();var i,s;l((i=r,s=n,!("0"!==(0,Ue.z)(i)&&"TOTAL"===(0,Ue.z)(s)))),u((e=>{const o=xo(r,n);return o!==e&&(t(yo),a(!0)),o}))}),[]);return[Co,s,n,p,i,r,c]},[To={c:"World",v:"0"},jo]=eo([{c:"World",v:"0"}]),Wo=[{c:"Total of trade partner",v:"TOTAL"},{c:"All 2-digit HS commodities",v:"AG2"}],[Po,Lo]=eo(Wo),zo=(()=>{const e=[];for(let o=0;o<23;o++){const t=""+(2023-o);e.push({c:t,v:t})}return e})(),[Mo,Eo]=eo(zo,1),Io=[{c:"Export Value",v:{rg:"X",measure:"primaryValue"}},{c:"Import Value",v:{rg:"M",measure:"primaryValue"}}],[Vo,Do]=eo(Io),[Oo={c:"World",v:"0"},Ro]=eo([{c:"World",v:"0"}]),ko={c:"Annual",v:"A"},$o=(0,qe.A)((e=>{const{isShow:o,caption:t,oneURI:r,tpURI:n,msgOnNotSelected:a,toTopLayer:i,onAbout:s,loadFn:l,onLoad:c,onShow:u,onClose:p}=e,d=(0,Fe.li)(),[h,g,m]=Ne(),[A,w,S,v,f,y,C]=(0,Be.A)({onAbout:s,onClose:p,toggleInputs:g}),[x,b]=(0,He.A)(!0),[T,j]=(0,Qe.A)(To,To),[W,P]=(0,Qe.A)(Oo,Oo),[L,z]=(0,Qe.A)(Po,Po),[M,E,I,V,D,O,R]=bo(P,z),[k,$]=(0,Qe.A)(Vo,Vo),[F,U]=(0,Qe.A)(Mo,Mo),q=(0,Fe.hb)((e=>{W(e),V()}),[]),H=(0,Fe.hb)((e=>{L(e),V()}),[]),Q=(0,Fe.hb)((()=>{const o=j(),t=P(),r=$(),n=z(),i=O(),s=[];var u,p;o||s.push(a("Reporter")),(o&&"all"===(0,Ue.z)(o)||(u=t,p=n,"all"===(0,Ue.z)(u)&&"total"!==(0,Ue.z)(p)))&&s.push("Query All is too complex"),o&&"0"===(0,Ue.z)(o)&&"AG2"===(0,Ue.z)(n)&&s.push("Query World by AG2 is too complex"),"t1"!==((0,Ue.z)(r)||{}).tfType||"0"===(0,Ue.z)(t)&&"SPLINE"!==(0,Ue.z)(i)||s.push("Query trade flow calculated values is only for category charts of trade partner World"),0===s.length&&c(l(e,{one:o,three:n,tradeFlow:r,tradePartner:t,chart:i,chType:i,time:(0,Ue.z)(U()),freq:ko,tradePartners:(0,Fe.UU)(d)})),y(s)}),[]);return(0,Je.jsxs)(_e.A.DraggableDialog,{isShow:o,caption:t,menuModel:S,toTopLayer:i,onLoad:Q,onShow:u,onClose:C,children:[(0,Je.jsx)(_e.A.Toolbar,{isShow:A,buttons:v}),(0,Je.jsx)(Ze,{isShow:h,configs:[["Trade Flow",x,b]],onClose:m}),(0,Je.jsx)(_e.A.SelectWithLoad,{isShow:o,isShowLabels:w,uri:r,caption:"Reporter",placeholder:jo,onSelect:T}),(0,Je.jsx)(_e.A.ShowHide,{isShow:x,children:(0,Je.jsx)(_e.A.RowInputSelect,{isShowLabels:w,caption:"Trade Flow",placeholder:Do,propCaption:"c",options:Io,onSelect:k})}),(0,Je.jsx)(_e.A.ShowHide,{isShow:!1,children:(0,Je.jsx)(_e.A.SelectWithLoad,{refEl:d,isShowLabels:w,uri:n,caption:"Partner",placeholder:Ro,onSelect:q})}),(0,Je.jsxs)(_e.A.ShowHide,{isShow:!0,children:[(0,Je.jsx)(_e.A.RowInputSelect,{isShowLabels:w,caption:"Aggregation",placeholder:Lo,propCaption:"c",options:Wo,onSelect:H}),(0,Je.jsxs)(_e.A.ShowHide,{isShow:E,children:[(0,Je.jsx)(_e.A.RowInputSelect,{isShowLabels:w,caption:"Chart",placeholder:M,propCaption:"c",options:R,onSelect:D}),(0,Je.jsx)(_e.A.ShowHide,{isShow:I,children:(0,Je.jsx)(_e.A.RowInputSelect,{isShowLabels:w,caption:"For Date",placeholder:Eo,propCaption:"c",options:zo,onSelect:F})})]})]}),(0,Je.jsx)(_e.A.ValidationMessages,{validationMessages:f})]})})),Fo={_a:$e,UnDialog5:So,UnDialogAgg:$o}}}]);