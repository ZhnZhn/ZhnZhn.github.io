"use strict";(self.webpackChunkweb_app_erc=self.webpackChunkweb_app_erc||[]).push([[538],{3217:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Ft});var r=o(3730),n=o(2296);const a="World",i="0",s=`${a} (${i})`,l="all",c="netWgt",p="qty",d="avgPerWeight",u="avgPerQuantity",h={marginTop:42,marginBottom:38},g={type:"spline"},m={type:"spline",visible:!1},w={type:"category",opposite:!1,labels:{y:18},crosshair:null,tickColor:"gray",tickWidth:3,tickLength:7,tickPosition:"outside",gridLineWidth:0},S={lineWidth:0,tickLength:0,startOnTick:!0,endOnTick:!0,minPadding:.05,maxPadding:.05,plotLines:null,labels:{x:3}};var v=o(6460),f=o(2823),A=o(5856),y=o(6327),C=o(8849);const x=(0,o(9550).z)("Website UN Comtrade Data","https://comtradeplus.un.org/TradeFlow/"),b=(e,t)=>t.period?t.subtitle+x():""+x(),T=()=>Object.create(null),j=e=>"AG2"===e.two,L=e=>Math.round((e||{}).primaryValue||0)||0,W=e=>{const{cmdCode:t}=e||{};return(t||"").length<4?t:(0,n.Ax)(t)},P=e=>(0,n.Ax)((e||{}).cmdDescE),z=e=>t=>{return o=(t||{})[e],(0,r.Et)(o)?""+o:(0,n.Ax)(o);var o},M=z("partnerCode"),E=z("reporterCode"),I=z("period"),V=e=>e&&(e.partnerCode===e.partner2Code||0===e.partner2Code);let R;const D=e=>R||((0,r.Ep)(e)?(R=e.reduce(((e,t)=>(t&&t.v&&t.v.length<4&&t.c&&(e[t.v]=(0,n.Ax)(t.c).replace(`(${t.v})`,"").trim()),e)),T()),R):T()),O=(e,t)=>{const o=M(t);return e[o]||o},$=(e,t)=>{const o=E(t);return e[o]||o},N=(e,t,o)=>{const n=[],a=D(t.tradePartners),s=((e,t)=>{const o=(r=e.one,n=e.tfType,"0"===r||"t1"===n?$:O);var r,n;return(e,r,n)=>t(e,o(r,n),n)})(t,o);let l=0,c=0;return e.data.forEach((e=>{const o=L(e),p=M(e);t.one!==i&&p===i&&V(e)?l=o:(0,r.F5)(o)&&V(e)&&(c+=o,n.push(s(o,a,e)))})),[n,l||c]},k=e=>{let{title:t}=e;return t},F=(e,t,o)=>{e.subtitle=(0,f.OJ)(e.subtitle,(0,f.j0)(`(${t}%,`,`${o}%)`))},U=e=>{let{value:t,rg:o=2,measure:r,tp:n,freq:a,chart:i,time:s}=e;return(0,f.ib)(t,o,r,n,a,i,s)},q=(e,t)=>({frequency:t.period||("M"===t.freq?"Monthly":"Annual"),description:b(0,t)}),H=function(e,t){let{itemValue:o,isWi:r=!0}=void 0===t?{}:t;const n=U(e);return{id:n,key:n,itemCaption:e.oneC,itemValue:o&&(0,A.A)(o),itemTime:e.time,isWithoutIndicator:r,dataSource:e.dataSource}},Q="X",Y="primaryValue",B="partner2Code=0",J=(e,t,o,r,n)=>`${e}https://comtradeapi.un.org/public/v1/preview/C/A/HS/?motCode=0&customsCode=C00&cmdCode=${o}&flowCode=${r}&period=${n}${(e=>e===i?"":`&reporterCode=${e}&${B}`)(t)}`,_={getRequestUrl(e){(e=>{if(e._isTs)throw new Error("ERR_10")})(e);const{one:t=i,rg:o=Q}=e;return J(e.proxy,t,e.two,o,e.time)+((e,t)=>j(e)||t===i?`&partnerCode=0&${B}`:"")(e,t)},checkResponse(e){if(e&&(0,r.Ep)(e.data))return e;const{error:t,message:o,statusCode:a}=e||{};if((0,r.O8)(t))throw(0,n.UE)("",t);if((0,r.O8)(o))throw(0,n.UE)("",429===a?`${a}: ${o.replace("in 1 seconds","in 1 minutes")}`:o);throw(0,n.UE)()},addPropsTo(e){const{one:t=i,v:o,rg:r=Q,measure:a=Y}=e;if(!t){const t=o.slice(3).split("_");(0,n.kp)(e,{one:t[0],two:t[1]})}(0,n.kp)(e,{rg:r,measure:a})}};var G=o(9270),X=o(4999),K=o(5385);const Z=(e,t,o)=>F(o,...(0,K.KM)(e,t)),ee=(e,t,o)=>({value:e,label:t,title:I(o)}),te=(e,t)=>{const[o,n]=j(t)?((e,t)=>{const o=[];let n=0;return e.data.forEach((e=>{const t=L(e);(0,r.F5)(t)&&(n+=t,o.push({value:t,label:W(e)+" "+P(e),title:I(e)}))})),Z(o,n,t),[o,n]})(e,t):((e,t)=>{const[o,r]=N(e,t,ee);return Z(o,r,t),[o,r]})(e,t);return(0,G.A)((0,X.Qn)(o),(0,X.Kl)(k(t),t.subtitle),(0,X.YT)({info:q(0,t),zhConfig:H(t,{itemValue:n})}),X.qP)};var oe=o(124),re=o(7229);const ne=(e,t,o,r,n)=>{const a=k(t);return(0,G.A)((0,X.mw)("BAR",r),(0,X.Kl)(a,t.subtitle),(0,X.YT)({info:q(0,t),zhConfig:H(t,{itemValue:n,isWi:!1})}),(0,X.vt)(0,{data:o,name:a}),X.qP)},ae=(0,re.q)((()=>(0,oe.Ov)("./data/uncomtrade/hs-chapters.json"))),ie=(e,t,o)=>{(0,C._u)(e),F(o,...(0,K.FE)({data:e,total:t,propName:"y"}))},se=(e,t)=>ae().then((o=>((e,t,o)=>{const n=!!e,a=[];let i=0;return t.data.forEach((t=>{const o=L(t);if((0,r.F5)(o)){const r=W(t),s=n&&e[r];i+=o,a.push({c:s?r+" "+s:r,y:o})}})),ie(a,i,o),[a,(0,y.mm)(a),i]})(o,e,t))).then((o=>ne(e,t,...o))),le=(e,t)=>({y:e,c:t}),ce=(e,t)=>{const[o,r]=N(e,t,le);return ie(o,r,t),ne(0,t,o,(0,y.mm)(o),r)},pe=(e,t)=>(j(t)?se:ce)(e,t);var de=o(4850),ue=o(3069),he=o(2096),ge=o(5248),me=o(7294),we=o(1852),Se=o(434);const ve=()=>Object.create(null),fe="primaryValue",Ae=(e,t)=>({y:e,forSort:void 0!==t?t:e}),ye=(e,t)=>{const o=t[e],r=0!==o?o:t.TradeValue?void 0:0;return Ae(r)},Ce=(0,we.J)(ye,c),xe=(0,we.J)(ye,p),be=(e,t)=>{const o=L(t),r=t[e],a=r&&null!=o?(0,n.W7)(o/r,2):void 0;return Ae(a,r)},Te=(0,we.J)(be,c),je=(0,we.J)(be,p),Le=(0,Se.j)({fDf:e=>e===fe?e=>Ae(L(e)):t=>Ae(t[e]),[c]:Ce,[p]:xe,[d]:Te,[u]:je}),We=e=>{const t=e&&e.length;return t&&t>0?e[t-1].forSort:void 0},Pe=function(e,t,o){void 0===t&&(t="partnerCode"),void 0===o&&(o=fe);const n=ve(),a=ve(),i=(e=>{const t=Le[e]||Le.fDf(e);return e=>({name:e.period,c:e.period,...t(e)})})(o);let s;return e.forEach((e=>{if(s=i(e),null!=s.y){const o=e[t];void 0===n[o]&&(n[o]=[]),n[o].push(s);const r=e.period;void 0===a[r]&&(a[r]=r)}})),[n,(l=a,(0,r.Co)(l).map((e=>l[e])).sort())];var l},ze=(e,t)=>o=>{const{name:r}=o,a=e[r],i=a[a.length-1],s=i?(0,n.W7)(i.y/t*100,1)+"%":"";return{...o,name:s+" "+r}},Me=(e,t)=>-1===e.indexOf(t),Ee=e=>{let t,o=0;for(t in e)if(Me(t,", nes")&&Me(t,a)){const r=e[t];o+=r[r.length-1].y}return o},Ie=Object.assign,Ve=e=>({fillColor:e,lineColor:e,lineWidth:1,radius:4,symbol:"circle"}),Re=e=>{let{config:t,hm:o,name:r,i:n,color:a,seriaOption:i,isShow:s=!1}=e;const{legend:l}=t.zhConfig,c=a||(0,he.v)(n),p={color:c,marker:Ve(c)},d=null!==i?s?{...g,...p}:{...m,...p}:null;(0,ge.M$)(t,o[r],n,r,d),l.push((0,me.f)(n,c,r,s))},De=e=>{let{config:t,hm:o,fromIndex:n}=e,a=n;(e=>(0,C.GY)((0,r.Co)(e).map((t=>({value:We(e[t]),name:t})))))(o).forEach(((e,r)=>{if(r>=a){const r=e.name;Re({config:t,hm:o,name:r,i:a,isShow:a<6}),a++}}))},Oe=(e,t)=>(e||{}).period-(t||{}).period,$e=(e,t,o)=>{const{data:n}=t,{one:i,measure:c}=o,p=i===l?"reporterCode":"partnerCode",[h,g]=Pe(n.sort(Oe),p,c),m=D(o.tradePartners),w=(S=h,v=m,(0,r.Co)(S).reduce(((e,t)=>(e[v[t]||t]=S[t],e)),T()));var S,v;w[s]&&i!==l?(Re({config:e,hm:w,i:0,name:s,color:"#7cb5ec",seriaOption:null,isShow:!0}),De({config:e,hm:w,fromIndex:1})):De({config:e,hm:w,fromIndex:0});const{legend:f}=e.zhConfig;e.zhConfig.legend=i===l?((e,t,o)=>{const r=Ee(t),n=ze(t,r);return 0!==r&&o!==d&&o!==u?e.map(n):e})(f,w,c):((e,t)=>{const o=t[a],r=o?o[o.length-1].y:Ee(t),n=ze(t,r);return 0!==r&&null!=r?e.map(n):e})(f,w),Ie(e.xAxis,{categories:g})},Ne=e=>{const t=""+e,o=4===t.length?t:t.slice(0,4)+"-"+t.slice(4,6);return(0,n.cY)(o)},ke=(e,t)=>{const o=((e,t)=>{const{title:o,subtitle:r}=t;return(0,G.A)((0,X.hN)(),(0,X.YT)({chart:h,xAxis:w,yAxis:S}),(0,X.Kl)(o,r),(0,X.PK)(ue.Gr),(0,X.YT)({info:q(0,t),zhConfig:H(t)}),(0,X.$n)([],!0),X.qP)})(0,t);return $e(o,e,t),1===(o.series||[]).length&&(e=>{const{series:t}=e,{data:o}=t[0],r=(o||[]).map((e=>[Ne(e.c),e.y]));t[0].data=r,t[0].type="spline",e.xAxis.categories=void 0,e.xAxis.type="datetime",e.tooltip=(0,de.Gs)(ue.BA),e.valueMoving=(0,n.Y1)(r),e.zhConfig.isWithoutIndicator=!1})(o),o},Fe=e=>(t,o)=>({config:e(t,o)}),Ue=e=>({toConfig:Fe((0,y.vD)(e)?te:(0,y.s9)(e)?ke:pe)});const qe={api:_,adapter:(0,o(4514).GT)({getRoute:Ue,crDfKey:U})};var He=o(1315),Qe=o(2401),Ye=o(4575),Be=o(9495),Je=o(4867),_e=o(4250),Ge=o(7474),Xe=o(3057),Ke=o(6318),Ze=o(8056),et=o(4428);const tt=function(e,t){void 0===t&&(t=0);const o=e[t];return[o,`Default: ${(0,Qe.eW)(o)}`]};var ot=o(4848);const rt=[{c:"Export Value",v:{rg:"X",measure:"primaryValue"}},{c:"Export Weight",v:{rg:"X",measure:"netWgt"}},{c:"Export Quantity",v:{rg:"X",measure:"qty"}},{c:"Export Average Value Per Weight",v:{rg:"X",measure:"avgPerWeight"}},{c:"Export Average Value Per Quantity",v:{rg:"X",measure:"avgPerQuantity"}},{c:"Import Value",v:{rg:"M",measure:"primaryValue"}},{c:"Import Weight",v:{rg:"M",measure:"netWgt"}},{c:"Import Quantity",v:{rg:"M",measure:"qty"}},{c:"Import Average Value Per Weight",v:{rg:"M",measure:"avgPerWeight"}},{c:"Import Average Value Per Quantity",v:{rg:"M",measure:"avgPerQuantity"}}],[nt,at]=tt(rt),[it={c:"World",v:"0"},st]=tt([{c:"World",v:"0"}]),lt=[{c:"Annual",v:"A"},{c:"Monthly",v:"M"}],[ct,pt]=tt(lt),dt=(e,t)=>({caption:e,value:t}),ut=[dt("Bar (60, 90): By Partners",v.zM),dt("Tree Map (60, 90): By Partners",v.uT),dt("Dots: By Partners",v.bR)],[ht,gt]=tt(ut),[mt]=(0,et.A)("Y",2),[wt,St]=tt(mt,1),vt=e=>`./data/uncomtrade/${e}.json`,ft=(0,Ye.A)((e=>{const{isShow:t,caption:o,oneURI:r,tpURI:n,dfProps:a,msgOnNotSelected:i,toTopLayer:s,loadFn:l,onLoad:c,onShow:p}=e,{dfId:d}=a||{},[u,h]=(0,He.J0)(ht),[g,m,w]=(0,Be.R)(),[S,v]=(0,Ge.A)(),[f,A,y,C,x,b]=(0,Xe.A)(e,{toggleInputs:m}),[T,j]=(0,Je.eY)(!0),[L,W]=(0,Je.eY)(!0),[P,z]=(0,Je.eY)(!1),M=(0,He.li)(),E=(0,He.li)(),I=(0,He.li)(),[V,R]=(0,_e.NC)(it,it),[D,O]=(0,_e.NC)(nt,nt),$=(0,_e.NC)()[1],[N,k]=(0,_e.NC)(wt,wt),[F,U]=(0,_e.NC)(ct,ct),q=(0,He.hb)((()=>{const t=(0,He.ZC)(E),{msg:o=[]}=t.getValidation(),r=R(),n=(0,Qe.z)(r),a=$(),i=(0,Qe.z)(a),s=U();if("all"===n&&"all"===i&&o.push("Query All to All is too complex"),"all"===n&&"M"===(0,Qe.z)(s)&&o.push("Query All Monthly is too complex"),0===o.length){const{one:o,two:n}=t.getValues();c(l(e,{...(0,He.y5)(I),one:r,two:o,three:n,tradeFlow:O(),tradePartner:a,freq:s,chType:u,time:(0,Qe.z)(k()),tradePartners:(0,He.UU)(M)}))}x(o)}),[u]);return(0,ot.jsxs)(Ke.A.DraggableDialog,{isShow:t,caption:o,menuModel:A,toTopLayer:s,onLoad:q,onShow:p,onClose:b,children:[(0,ot.jsx)(Ke.A.Toolbar,{isShow:f,buttons:y}),(0,ot.jsx)(Ze.A,{isShow:g,isShowLabels:S,configs:[["Heading",T,j],["Trade Flow",L,W],["Chart",P,z]],onToggleLabels:v,onClose:w}),(0,ot.jsx)(Ke.A.SelectWithLoad,{isShow:t,isShowLabels:S,uri:r,caption:"Reporter",placeholder:st,onSelect:V}),(0,ot.jsx)(Ke.A.ShowHide,{isShow:!1,children:(0,ot.jsx)(Ke.A.SelectWithLoad,{refEl:M,isShowLabels:S,uri:n,caption:"Partner",placeholder:"Default: World"})}),(0,ot.jsx)(Ke.A.ShowHide,{isShow:T,children:(0,ot.jsx)(Ke.A.SelectOneTwo,{refEl:E,isShow:t,isShowLabels:S,uri:vt(d),oneCaption:"Heading",twoCaption:"Subheading",msgOnNotSelected:i})}),(0,ot.jsx)(Ke.A.ShowHide,{isShow:L,children:(0,ot.jsx)(Ke.A.RowInputSelect,{isShowLabels:S,caption:"Trade Flow",placeholder:at,propCaption:"c",options:rt,onSelect:D})}),(0,ot.jsx)(Ke.A.ShowHide,{isShow:!1,children:(0,ot.jsx)(Ke.A.RowInputSelect,{isShowLabels:S,caption:"Frequency",placeholder:pt,propCaption:"c",options:lt})}),(0,ot.jsx)(Ke.A.RowChartDate,{isShowChart:P,isShowDate:P,refSeriaColor:I,chartType:u,isShowLabels:S,chartOptions:ut,chartDefault:gt,onSelectChart:h,dateDefault:St,dateOptions:mt,onSelectDate:N}),(0,ot.jsx)(Ke.A.ValidationMessages,{validationMessages:C})]})})),At=[{c:"Bar (60, 90): By Partners",v:v.zM},{c:"TreeMap (60, 90): By Partners",v:v.uT}],yt=At,[Ct,xt]=tt(At),bt=(e,t)=>"0"===(0,Qe.z)(e)&&"TOTAL"===(0,Qe.z)(t)?yt:At,Tt=(e,t)=>{const[o,r]=(0,_e.NC)(Ct,Ct),[n,a]=(0,He.J0)(!0),i=(0,He.hb)((e=>{o(e)}),[]),[s,l]=(0,He.J0)(!0),[c,p]=(0,He.J0)((()=>bt(e(),t()))),d=(0,He.hb)((()=>{const r=e(),n=t();var i,s;l((i=r,s=n,!("0"!==(0,Qe.z)(i)&&"TOTAL"===(0,Qe.z)(s)))),p((e=>{const t=bt(r,n);return t!==e&&(o(Ct),a(!0)),t}))}),[]);return[xt,s,n,d,i,r,c]},[jt={c:"World",v:"0"},Lt]=tt([{c:"World",v:"0"}]),Wt=[{c:"Total of trade partner",v:"TOTAL"},{c:"All 2-digit HS commodities",v:"AG2"}],[Pt,zt]=tt(Wt),Mt=(()=>{const e=[];for(let t=0;t<23;t++){const o=""+(2023-t);e.push({c:o,v:o})}return e})(),[Et,It]=tt(Mt,1),Vt=[{c:"Export Value",v:{rg:"X",measure:"primaryValue"}},{c:"Import Value",v:{rg:"M",measure:"primaryValue"}}],[Rt,Dt]=tt(Vt),[Ot={c:"World",v:"0"},$t]=tt([{c:"World",v:"0"}]),Nt={c:"Annual",v:"A"},kt=(0,Ye.A)((e=>{const{isShow:t,caption:o,oneURI:r,tpURI:n,msgOnNotSelected:a,toTopLayer:i,loadFn:s,onLoad:l,onShow:c}=e,p=(0,He.li)(),[d,u,h]=(0,Be.R)(),[g,m]=(0,Ge.A)(),[w,S,v,f,A,y]=(0,Xe.A)(e,{toggleInputs:u}),[C,x]=(0,Je.eY)(!0),[b,T]=(0,_e.NC)(jt,jt),[j,L]=(0,_e.NC)(Ot,Ot),[W,P]=(0,_e.NC)(Pt,Pt),[z,M,E,I,V,R,D]=Tt(L,P),[O,$]=(0,_e.NC)(Rt,Rt),[N,k]=(0,_e.NC)(Et,Et),F=(0,He.hb)((e=>{j(e),I()}),[]),U=(0,He.hb)((e=>{W(e),I()}),[]),q=(0,He.hb)((()=>{const t=T(),o=L(),r=$(),n=P(),i=R(),c=[];var d,u;t||c.push(a("Reporter")),(t&&"all"===(0,Qe.z)(t)||(d=o,u=n,"all"===(0,Qe.z)(d)&&"total"!==(0,Qe.z)(u)))&&c.push("Query All is too complex"),t&&"0"===(0,Qe.z)(t)&&"AG2"===(0,Qe.z)(n)&&c.push("Query World by AG2 is too complex"),"t1"!==((0,Qe.z)(r)||{}).tfType||"0"===(0,Qe.z)(o)&&"SPLINE"!==(0,Qe.z)(i)||c.push("Query trade flow calculated values is only for category charts of trade partner World"),0===c.length&&l(s(e,{one:t,three:n,tradeFlow:r,tradePartner:o,chart:i,chType:i,time:(0,Qe.z)(k()),freq:Nt,tradePartners:(0,He.UU)(p)})),A(c)}),[]);return(0,ot.jsxs)(Ke.A.DraggableDialog,{isShow:t,caption:o,menuModel:S,toTopLayer:i,onLoad:q,onShow:c,onClose:y,children:[(0,ot.jsx)(Ke.A.Toolbar,{isShow:w,buttons:v}),(0,ot.jsx)(Ze.A,{isShow:d,isShowLabels:g,configs:[["Trade Flow",C,x]],onToggleLabels:m,onClose:h}),(0,ot.jsx)(Ke.A.SelectWithLoad,{isShow:t,isShowLabels:g,uri:r,caption:"Reporter",placeholder:Lt,onSelect:b}),(0,ot.jsx)(Ke.A.ShowHide,{isShow:C,children:(0,ot.jsx)(Ke.A.RowInputSelect,{isShowLabels:g,caption:"Trade Flow",placeholder:Dt,propCaption:"c",options:Vt,onSelect:O})}),(0,ot.jsx)(Ke.A.ShowHide,{isShow:!1,children:(0,ot.jsx)(Ke.A.SelectWithLoad,{refEl:p,isShowLabels:g,uri:n,caption:"Partner",placeholder:$t,onSelect:F})}),(0,ot.jsxs)(Ke.A.ShowHide,{isShow:!0,children:[(0,ot.jsx)(Ke.A.RowInputSelect,{isShowLabels:g,caption:"Aggregation",placeholder:zt,propCaption:"c",options:Wt,onSelect:U}),(0,ot.jsxs)(Ke.A.ShowHide,{isShow:M,children:[(0,ot.jsx)(Ke.A.RowInputSelect,{isShowLabels:g,caption:"Chart",placeholder:z,propCaption:"c",options:D,onSelect:V}),(0,ot.jsx)(Ke.A.ShowHide,{isShow:E,children:(0,ot.jsx)(Ke.A.RowInputSelect,{isShowLabels:g,caption:"For Date",placeholder:It,propCaption:"c",options:Mt,onSelect:N})})]})]}),(0,ot.jsx)(Ke.A.ValidationMessages,{validationMessages:f})]})})),Ft={_a:qe,UnDialog5:ft,UnDialogAgg:kt}},8056:(e,t,o)=>{o.d(t,{A:()=>l});var r=o(1315),n=o(186),a=o(7212),i=o(8353),s=o(4848);const l=e=>(0,s.jsx)(n.A,{...e,children:(0,r.lZ)(e.configs,(e=>(0,s.jsx)(a.A,{style:i.Zt,caption:e[0],initialValue:e[1],onToggle:e[2]},e[0])))})}}]);