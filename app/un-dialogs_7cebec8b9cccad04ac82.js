"use strict";(self.webpackChunkweb_app_erc=self.webpackChunkweb_app_erc||[]).push([[538],{2767:(e,o,t)=>{t.r(o),t.d(o,{default:()=>Oo});var r=t(2296);const n="World",a="0",s=`${n} (${a})`,i="all",l="netWgt",c="qty",p="avgPerWeight",u="avgPerQuantity",d={marginTop:42,marginBottom:38},h={type:"spline"},g={type:"spline",visible:!1},m={type:"category",opposite:!1,labels:{y:18},crosshair:null,tickColor:"gray",tickWidth:3,tickLength:7,tickPosition:"outside",gridLineWidth:0},A={lineWidth:0,tickLength:0,startOnTick:!0,endOnTick:!0,minPadding:.05,maxPadding:.05,plotLines:null,labels:{x:3}};var w=t(6460),S=t(2823),v=t(6327),f=t(8849),y=t(5856);const x=(0,t(9550).z)("Website UN Comtrade Data","https://comtradeplus.un.org/TradeFlow/"),C=(e,o)=>o.period?o.subtitle+x():""+x(),b=()=>Object.create(null),T=e=>"AG2"===e.two,j=e=>Math.round((e||{}).primaryValue||0)||0,W=e=>{const{cmdCode:o}=e||{};return(o||"").length<4?o:(0,r.Ax)(o)},L=e=>(0,r.Ax)((e||{}).cmdDescE),P=e=>o=>{return t=(o||{})[e],(0,r.Et)(t)?""+t:(0,r.Ax)(t);var t},M=P("partnerCode"),z=P("reporterCode"),E=P("period"),I=e=>e&&(e.partnerCode===e.partner2Code||0===e.partner2Code);let V;const D=e=>V||((0,r.Ep)(e)?(V=e.reduce(((e,o)=>(o&&o.v&&o.v.length<4&&o.c&&(e[o.v]=(0,r.Ax)(o.c).replace(`(${o.v})`,"").trim()),e)),b()),V):b()),O=(e,o)=>{const t=M(o);return e[t]||t},R=(e,o)=>{const t=z(o);return e[t]||t},k=(e,o,t)=>{const n=[],s=D(o.tradePartners),i=((e,o)=>{const t=(r=e.one,n=e.tfType,"0"===r||"t1"===n?R:O);var r,n;return(e,r,n)=>o(e,t(r,n),n)})(o,t);let l=0,c=0;return e.data.forEach((e=>{const t=j(e),p=M(e);o.one!==a&&p===a&&I(e)?l=t:(0,r.F5)(t)&&I(e)&&(c+=t,n.push(i(t,s,e)))})),[n,l||c]},U=e=>{let{title:o}=e;return o},F=e=>{let{value:o,rg:t=2,measure:r,tp:n,freq:a,chart:s,time:i}=e;return(0,S.ib)(o,t,r,n,a,s,i)},$=(e,o)=>({frequency:o.period||("M"===o.freq?"Monthly":"Annual"),description:C(0,o)}),q=function(e,o){let{itemValue:t,isLegend:r,isWi:n=!0}=void 0===o?{}:o;const a=F(e);return{id:a,key:a,itemCaption:e.oneC,itemValue:t&&(0,y.A)(t),itemTime:e.time,legend:r?[]:void 0,isWithoutIndicator:n,dataSource:e.dataSource}},H="X",Q="primaryValue",B=(e,o,t,r,n)=>`${e}https://comtradeapi.un.org/public/v1/preview/C/A/HS/?motCode=0&customsCode=C00&cmdCode=${t}&flowCode=${r}&period=${n}${(e=>e===a?"":`&reporterCode=${e}`)(o)}`,N={getRequestUrl(e){(e=>{if(e._isTs)throw new Error("ERR_10")})(e);const{one:o=a,rg:t=H}=e;return B(e.proxy,o,e.two,t,e.time)+((e,o)=>T(e)||o===a?"&partnerCode=0&partner2Code=0":"")(e,o)},checkResponse(e){if(e&&(0,r.Ep)(e.data))return e;const{error:o,message:t,statusCode:n}=e||{};if((0,r.O8)(o))throw(0,r.UE)("",o);if((0,r.O8)(t))throw(0,r.UE)("",429===n?`${n}: ${t.replace("in 1 seconds","in 1 minutes")}`:t);throw(0,r.UE)()},addPropsTo(e){const{one:o=a,v:t,rg:n=H,measure:s=Q}=e;if(!o){const o=t.slice(3).split("_");(0,r.kp)(e,{one:o[0],two:o[1]})}(0,r.kp)(e,{rg:n,measure:s})}};var _=t(9270),G=t(4999),K=t(1031);const Y=(e,o,t)=>({value:e,label:o,title:E(t)}),X=(e,o)=>{const[t,n]=T(o)?(e=>{const o=[];let t=0;return e.data.forEach((e=>{const n=j(e);(0,r.F5)(n)&&(t+=n,o.push({value:n,label:W(e)+" "+L(e),title:E(e)}))})),(0,K.KM)(o,t),[o,t]})(e):((e,o)=>{const[t,r]=k(e,o,Y);return(0,K.KM)(t,r),[t,r]})(e,o);return(0,_.A)((0,G.Qn)(t),(0,G.Kl)(U(o),o.subtitle),(0,G.YT)({info:$(0,o),zhConfig:q(o,{itemValue:n})}),G.qP)},J=(e,o,t,r,n)=>{const a=U(o);return(0,_.A)((0,G.mw)("BAR",r),(0,G.Kl)(a,o.subtitle),(0,G.YT)({info:$(0,o),zhConfig:q(o,{itemValue:n,isWi:!1})}),(0,G.vt)(0,{data:t,name:a}),G.qP)};let Z;const ee=(e,o)=>((0,f._u)(e),(0,K.FE)({data:e,total:o,propName:"y"}),e.map((e=>e.c))),oe=e=>(Z?Promise.resolve(Z):fetch("./data/uncomtrade/hs-chapters.json").then((e=>{if(!e.ok)throw new Error("Network response was not OK");return e.json()})).then((e=>Z=(e||{}).hm)).catch((()=>{}))).then((o=>((e,o)=>{const t=!!o,n=[];let a=0;e.data.forEach((e=>{const s=j(e);if((0,r.F5)(s)){const r=W(e),i=t&&o[r];a+=s,n.push({c:i?r+" "+i:r,y:s})}}));const s=ee(n,a);return[n,s,a]})(e,o))),te=(e,o)=>({y:e,c:o}),re=(e,o)=>T(o)?oe(e).then((e=>{let[t,r,n]=e;return J(0,o,t,r,n)})):((e,o)=>{const[t,r]=k(e,o,te),n=ee(t,r);return J(0,o,t,n,r)})(e,o);var ne=t(4850),ae=t(5121),se=t(2096),ie=t(5248),le=t(7294);const ce=Object.keys,pe=()=>Object.create(null),ue="primaryValue",de=(e,o)=>({y:e,forSort:void 0!==o?o:e}),he=(e,o)=>{const t=o[e],r=0!==t?t:o.TradeValue?void 0:0;return de(r)},ge=he.bind(null,l),me=he.bind(null,c),Ae=(e,o)=>{const t=j(o),n=o[e],a=n&&null!=t?(0,r.W7)(t/n,2):void 0;return de(a,n)},we=Ae.bind(null,l),Se=Ae.bind(null,c),ve={fDf:e=>e===ue?e=>de(j(e)):o=>de(o[e]),[l]:ge,[c]:me,[p]:we,[u]:Se},fe=e=>{const o=e&&e.length;return o&&o>0?e[o-1].forSort:void 0},ye=function(e,o,t){void 0===o&&(o="partnerCode"),void 0===t&&(t=ue);const r=pe(),n=pe(),a=(e=>{const o=ve[e]||ve.fDf(e);return e=>({name:e.period,c:e.period,...o(e)})})(t);let s;return e.forEach((e=>{if(s=a(e),null!=s.y){const t=e[o];void 0===r[t]&&(r[t]=[]),r[t].push(s);const a=e.period;void 0===n[a]&&(n[a]=a)}})),[r,(i=n,ce(i).map((e=>i[e])).sort())];var i},xe=(e,o)=>t=>{const{name:n}=t,a=e[n],s=a[a.length-1],i=s?(0,r.W7)(s.y/o*100,1)+"%":"";return{...t,name:i+" "+n}},Ce=(e,o)=>-1===e.indexOf(o),be=e=>{let o,t=0;for(o in e)if(Ce(o,", nes")&&Ce(o,n)){const r=e[o];t+=r[r.length-1].y}return t},Te=Object.assign,je=Object.keys,We=e=>({fillColor:e,lineColor:e,lineWidth:1,radius:4,symbol:"circle"}),Le=e=>{let{config:o,hm:t,name:r,i:n,color:a,seriaOption:s,isShow:i=!1}=e;const{legend:l}=o.zhConfig,c=a||(0,se.v)(n),p={color:c,marker:We(c)},u=null!==s?i?{...h,...p}:{...g,...p}:null;(0,ie.M$)(o,t[r],n,r,u),l.push((0,le.f)(n,c,r,i))},Pe=e=>{let{config:o,hm:t,fromIndex:r}=e,n=r;(e=>(0,f.GY)(ce(e).map((o=>({value:fe(e[o]),name:o})))))(t).forEach(((e,r)=>{if(r>=n){const r=e.name;Le({config:o,hm:t,name:r,i:n,isShow:n<6}),n++}}))},Me=(e,o)=>(e||{}).period-(o||{}).period,ze=(e,o,t)=>{const{data:r}=o,{one:a,measure:l}=t,c=a===i?"reporterCode":"partnerCode",[d,h]=ye(r.sort(Me),c,l),g=D(t.tradePartners),m=(w=g,je(A=d).reduce(((e,o)=>(e[w[o]||o]=A[o],e)),b()));var A,w;m[s]&&a!==i?(Le({config:e,hm:m,i:0,name:s,color:"#7cb5ec",seriaOption:null,isShow:!0}),Pe({config:e,hm:m,fromIndex:1})):Pe({config:e,hm:m,fromIndex:0});const{legend:S}=e.zhConfig;e.zhConfig.legend=a===i?((e,o,t)=>{const r=be(o),n=xe(o,r);return 0!==r&&t!==p&&t!==u?e.map(n):e})(S,m,l):((e,o)=>{const t=o[n],r=t?t[t.length-1].y:be(o),a=xe(o,r);return 0!==r&&null!=r?e.map(a):e})(S,m),Te(e.xAxis,{categories:h})},Ee=e=>{const o=""+e,t=4===o.length?o:o.slice(0,4)+"-"+o.slice(4,6);return(0,r.cY)(t)},Ie=(e,o)=>{const t=((e,o)=>{const{title:t,subtitle:r}=o;return(0,_.A)((0,G.hN)(),(0,G.YT)({chart:d,xAxis:m,yAxis:A}),(0,G.Kl)(t,r),(0,G.PK)(ae.Gr),(0,G.YT)({info:$(0,o),zhConfig:q(o,{isLegend:!0})}),G.qP)})(0,o);return ze(t,e,o),1===(t.series||[]).length&&(e=>{const{series:o}=e,{data:t}=o[0],n=(t||[]).map((e=>[Ee(e.c),e.y]));o[0].data=n,o[0].type="spline",e.xAxis.categories=void 0,e.xAxis.type="datetime",e.tooltip=(0,ne.Gs)(ae.BA),e.valueMoving=(0,r.Y1)(n),e.zhConfig.isWithoutIndicator=!1})(t),t},Ve=e=>(o,t)=>({config:e(o,t)}),De=e=>({toConfig:Ve((0,v.vD)(e)?X:(0,v.s9)(e)?Ie:re)});const Oe={api:N,adapter:(0,t(4514).GT)({getRoute:De,crDfKey:F})};var Re=t(1315),ke=t(2401),Ue=t(4575),Fe=t(4867),$e=t(4250),qe=t(3057);const He=()=>{const[e,o]=(0,Fe.A)(!1),t=(0,Re.hb)((()=>{o(!1)}),[o]);return[e,o,t]};var Qe=t(4927),Be=t(4428),Ne=t(972),_e=t(6223),Ge=t(8353),Ke=t(4848);const Ye=e=>{let{isShow:o,configs:t,onClose:r}=e;return(0,Ke.jsx)(Ne.A,{isShow:o,className:Ge.ND,style:Ge.lM,onClose:r,children:(t||[]).map((e=>(0,Ke.jsx)(_e.A,{style:Ge.v$,color:Ge.Ic,caption:e[0],value:e[1],onToggle:e[2]},e[0])))})},Xe=function(e,o){void 0===o&&(o=0);const t=e[o];return[t,`Default: ${(0,ke.eW)(t)}`]},Je=[{c:"Export Value",v:{rg:"X",measure:"primaryValue"}},{c:"Export Weight",v:{rg:"X",measure:"netWgt"}},{c:"Export Quantity",v:{rg:"X",measure:"qty"}},{c:"Export Average Value Per Weight",v:{rg:"X",measure:"avgPerWeight"}},{c:"Export Average Value Per Quantity",v:{rg:"X",measure:"avgPerQuantity"}},{c:"Import Value",v:{rg:"M",measure:"primaryValue"}},{c:"Import Weight",v:{rg:"M",measure:"netWgt"}},{c:"Import Quantity",v:{rg:"M",measure:"qty"}},{c:"Import Average Value Per Weight",v:{rg:"M",measure:"avgPerWeight"}},{c:"Import Average Value Per Quantity",v:{rg:"M",measure:"avgPerQuantity"}}],[Ze,eo]=Xe(Je),[oo={c:"World",v:"0"},to]=Xe([{c:"World",v:"0"}]),ro=[{c:"Annual",v:"A"},{c:"Monthly",v:"M"}],[no,ao]=Xe(ro),so=(e,o)=>({caption:e,value:o}),io=[so("Bar (60, 90): By Partners",w.zM),so("Tree Map (60, 90): By Partners",w.uT),so("Dots: By Partners",w.bR)],[lo,co]=Xe(io),[po]=(0,Be.A)("Y",2),[uo,ho]=Xe(po,1),go=(0,Ue.A)((e=>{const{isShow:o,caption:t,oneURI:r,twoURI:n,tpURI:a,msgOnNotSelected:s,toTopLayer:i,onAbout:l,loadFn:c,onLoad:p,onShow:u,onClose:d}=e,[h,g]=(0,Re.J0)(lo),[m,A,w]=He(),[S,v,f,y,x,C,b]=(0,qe.A)({onAbout:l,onClose:d,toggleInputs:A}),[T,j]=(0,Fe.A)(!0),[W,L]=(0,Fe.A)(!0),[P,M]=(0,Fe.A)(!1),z=(0,Re.li)(),E=(0,Re.li)(),I=(0,Re.li)(),[V,D]=(0,$e.A)(oo,oo),[O,R]=(0,$e.A)(Ze,Ze),k=(0,$e.A)()[1],[U,F]=(0,$e.A)(uo,uo),[$,q]=(0,$e.A)(no,no),H=(0,Re.hb)((()=>{const o=(0,Re.ZC)(E),{msg:t=[]}=o.getValidation(),r=D(),n=(0,ke.z)(r),a=k(),s=(0,ke.z)(a),i=q();if("all"===n&&"all"===s&&t.push("Query All to All is too complex"),"all"===n&&"M"===(0,ke.z)(i)&&t.push("Query All Monthly is too complex"),0===t.length){const{one:t,two:n}=o.getValues();p(c(e,{...(0,Re.y5)(I),one:r,two:t,three:n,tradeFlow:R(),tradePartner:a,freq:i,chType:h,time:(0,ke.z)(F()),tradePartners:(0,Re.UU)(z)}))}C(t)}),[h]);return(0,Ke.jsxs)(Qe.A.DraggableDialog,{isShow:o,caption:t,menuModel:f,toTopLayer:i,onLoad:H,onShow:u,onClose:b,children:[(0,Ke.jsx)(Qe.A.Toolbar,{isShow:S,buttons:y}),(0,Ke.jsx)(Ye,{isShow:m,configs:[["Heading",T,j],["Trade Flow",W,L],["Chart",P,M]],onClose:w}),(0,Ke.jsx)(Qe.A.SelectWithLoad,{isShow:o,isShowLabels:v,uri:r,caption:"Reporter",placeholder:to,onSelect:V}),(0,Ke.jsx)(Qe.A.ShowHide,{isShow:!1,children:(0,Ke.jsx)(Qe.A.SelectWithLoad,{refEl:z,isShowLabels:v,uri:a,caption:"Partner",placeholder:"Default: World"})}),(0,Ke.jsx)(Qe.A.ShowHide,{isShow:T,children:(0,Ke.jsx)(Qe.A.SelectOneTwo,{refEl:E,isShow:o,isShowLabels:v,uri:n,oneCaption:"Heading",twoCaption:"Subheading",msgOnNotSelected:s})}),(0,Ke.jsx)(Qe.A.ShowHide,{isShow:W,children:(0,Ke.jsx)(Qe.A.RowInputSelect,{isShowLabels:v,caption:"Trade Flow",placeholder:eo,propCaption:"c",options:Je,onSelect:O})}),(0,Ke.jsx)(Qe.A.ShowHide,{isShow:!1,children:(0,Ke.jsx)(Qe.A.RowInputSelect,{isShowLabels:v,caption:"Frequency",placeholder:ao,propCaption:"c",options:ro})}),(0,Ke.jsx)(Qe.A.RowChartDate,{isShowChart:P,isShowDate:P,refSeriaColor:I,chartType:h,isShowLabels:v,chartOptions:io,chartDefault:co,onSelectChart:g,dateDefault:ho,dateOptions:po,onSelectDate:U}),(0,Ke.jsx)(Qe.A.ValidationMessages,{validationMessages:x})]})})),mo=[{c:"Bar (60, 90): By Partners",v:w.zM},{c:"TreeMap (60, 90): By Partners",v:w.uT}],Ao=mo,[wo,So]=Xe(mo),vo=(e,o)=>"0"===(0,ke.z)(e)&&"TOTAL"===(0,ke.z)(o)?Ao:mo,fo=(e,o)=>{const[t,r]=(0,$e.A)(wo,wo),[n,a]=(0,Re.J0)(!0),s=(0,Re.hb)((e=>{t(e)}),[]),[i,l]=(0,Re.J0)(!0),[c,p]=(0,Re.J0)((()=>vo(e(),o()))),u=(0,Re.hb)((()=>{const r=e(),n=o();var s,i;l((s=r,i=n,!("0"!==(0,ke.z)(s)&&"TOTAL"===(0,ke.z)(i)))),p((e=>{const o=vo(r,n);return o!==e&&(t(wo),a(!0)),o}))}),[]);return[So,i,n,u,s,r,c]},[yo={c:"World",v:"0"},xo]=Xe([{c:"World",v:"0"}]),Co=[{c:"Total of trade partner",v:"TOTAL"},{c:"All 2-digit HS commodities",v:"AG2"}],[bo,To]=Xe(Co),jo=(()=>{const e=[];for(let o=0;o<23;o++){const t=""+(2023-o);e.push({c:t,v:t})}return e})(),[Wo,Lo]=Xe(jo,1),Po=[{c:"Export Value",v:{rg:"X",measure:"primaryValue"}},{c:"Import Value",v:{rg:"M",measure:"primaryValue"}}],[Mo,zo]=Xe(Po),[Eo={c:"World",v:"0"},Io]=Xe([{c:"World",v:"0"}]),Vo={c:"Annual",v:"A"},Do=(0,Ue.A)((e=>{const{isShow:o,caption:t,oneURI:r,tpURI:n,msgOnNotSelected:a,toTopLayer:s,onAbout:i,loadFn:l,onLoad:c,onShow:p,onClose:u}=e,d=(0,Re.li)(),[h,g,m]=He(),[A,w,S,v,f,y,x]=(0,qe.A)({onAbout:i,onClose:u,toggleInputs:g}),[C,b]=(0,Fe.A)(!0),[T,j]=(0,$e.A)(yo,yo),[W,L]=(0,$e.A)(Eo,Eo),[P,M]=(0,$e.A)(bo,bo),[z,E,I,V,D,O,R]=fo(L,M),[k,U]=(0,$e.A)(Mo,Mo),[F,$]=(0,$e.A)(Wo,Wo),q=(0,Re.hb)((e=>{W(e),V()}),[]),H=(0,Re.hb)((e=>{P(e),V()}),[]),Q=(0,Re.hb)((()=>{const o=j(),t=L(),r=U(),n=M(),s=O(),i=[];var p,u;o||i.push(a("Reporter")),(o&&"all"===(0,ke.z)(o)||(p=t,u=n,"all"===(0,ke.z)(p)&&"total"!==(0,ke.z)(u)))&&i.push("Query All is too complex"),o&&"0"===(0,ke.z)(o)&&"AG2"===(0,ke.z)(n)&&i.push("Query World by AG2 is too complex"),"t1"!==((0,ke.z)(r)||{}).tfType||"0"===(0,ke.z)(t)&&"SPLINE"!==(0,ke.z)(s)||i.push("Query trade flow calculated values is only for category charts of trade partner World"),0===i.length&&c(l(e,{one:o,three:n,tradeFlow:r,tradePartner:t,chart:s,chType:s,time:(0,ke.z)($()),freq:Vo,tradePartners:(0,Re.UU)(d)})),y(i)}),[]);return(0,Ke.jsxs)(Qe.A.DraggableDialog,{isShow:o,caption:t,menuModel:S,toTopLayer:s,onLoad:Q,onShow:p,onClose:x,children:[(0,Ke.jsx)(Qe.A.Toolbar,{isShow:A,buttons:v}),(0,Ke.jsx)(Ye,{isShow:h,configs:[["Trade Flow",C,b]],onClose:m}),(0,Ke.jsx)(Qe.A.SelectWithLoad,{isShow:o,isShowLabels:w,uri:r,caption:"Reporter",placeholder:xo,onSelect:T}),(0,Ke.jsx)(Qe.A.ShowHide,{isShow:C,children:(0,Ke.jsx)(Qe.A.RowInputSelect,{isShowLabels:w,caption:"Trade Flow",placeholder:zo,propCaption:"c",options:Po,onSelect:k})}),(0,Ke.jsx)(Qe.A.ShowHide,{isShow:!1,children:(0,Ke.jsx)(Qe.A.SelectWithLoad,{refEl:d,isShowLabels:w,uri:n,caption:"Partner",placeholder:Io,onSelect:q})}),(0,Ke.jsxs)(Qe.A.ShowHide,{isShow:!0,children:[(0,Ke.jsx)(Qe.A.RowInputSelect,{isShowLabels:w,caption:"Aggregation",placeholder:To,propCaption:"c",options:Co,onSelect:H}),(0,Ke.jsxs)(Qe.A.ShowHide,{isShow:E,children:[(0,Ke.jsx)(Qe.A.RowInputSelect,{isShowLabels:w,caption:"Chart",placeholder:z,propCaption:"c",options:R,onSelect:D}),(0,Ke.jsx)(Qe.A.ShowHide,{isShow:I,children:(0,Ke.jsx)(Qe.A.RowInputSelect,{isShowLabels:w,caption:"For Date",placeholder:Lo,propCaption:"c",options:jo,onSelect:F})})]})]}),(0,Ke.jsx)(Qe.A.ValidationMessages,{validationMessages:f})]})})),Oo={_a:Oe,UnDialog5:go,UnDialogAgg:Do}}}]);