"use strict";(self.webpackChunkweb_app_erc=self.webpackChunkweb_app_erc||[]).push([[577],{988(e,t,r){r.d(t,{default:()=>xe});var s=r(1315),n=r(4558),i=r(634),o=r(4867),l=r(3730);let a;const c=e=>{const t=(0,l.dw)((""+e.updated).trim().slice(0,4));return!(0,l.Et)(t)||(a||(a=(new Date).getUTCFullYear()))-t<3},d=e=>e.active,p=(e,t)=>e?"SDN"===t?d:c:void 0;var g=r(6752),u=r(2336),x=r(8203);const f=(0,s.q6)();var m=r(972),h=r(7212),j=r(4848);const y={width:240,paddingBottom:8},v={padding:"12px 12px 0 12px"},C=(0,m.jv)((()=>({className:"charts__menu-more",style:y})))((e=>{let{toggleFilter:t}=e;const r=(0,m.VC)()[0];return(0,j.jsx)(h.A,{refEl:r,style:v,caption:"Filter Not Active Topic",onToggle:t})}));var b=r(5032),T=r(4427);const k={dialogConf:!0,dialogType:"DialogStatN",dialogProps:{chartsType:"t2ae",dfProps:{}}},P=Object.assign,w=e=>()=>{const{rootUrl:t,id:r,proxy:s,bT:n,lT:i,dU:o,noTime:l,dS:a}=e,c=(e=>{let{rootDimUrl:t,rootUrl:r,id:s,proxy:n="",dfDimQuery:i=""}=e;return""+n+(t||r)+"/"+s+i})(e),d=P({},k,Object.assign({type:n+"_"+r},(e=>{const t=e.text||"";return{menuTitle:t.slice(0,27),contFullCaption:e.sP+": "+(r=t,r.length>35?r.slice(0,35)+"...":r)};var r})(e)));P(d.dialogProps,{loadId:i,descrUrl:o,dataSource:a,dfProps:{dimUrl:c,baseMeta:t,dfId:r,proxy:s,noTime:l}}),(0,T.ui)(n+"_"+r,n,d)},I=Array.isArray,O=(e,t)=>{const r=[];return e.forEach((e=>{e.id!==t&&(e.text=e.description,(e.hasSubjects||(e=>{let{tables:t}=e;return I(t)&&0===t.length})(e))&&(e.type="l"),r.push(e))})),r},A=(e,t)=>{const r=e[0];return 0!==(r.tables||[]).length?r.tables.map((e=>(e.text=e.id+": "+e.text+", "+(e.firstPeriod||"")+"-"+(e.latestPeriod||""),e))):0!==(r.subjects||[]).length?O(r.subjects,t):O(e,t)},N=e=>(e.forEach((e=>{"t"===e.type&&(e.text=e.id+": "+e.text)})),e),S=Array.isArray,F=(e,t)=>e.text<t.text?-1:e.text>t.text?1:0,M={SDN:A,SIR:N},_=function(e,t,r){void 0===e&&(e="");const{rootUrl:s,dfTi:n="",lT:i}=t;return fetch(""+e+s+"/"+r+n,{cache:"default"}).then((e=>{const{status:t}=e;if(t>=200&&t<400)return e.json();throw 404===t?{message:"Items not found"}:{message:t+" "+e.statusText}})).then((e=>{if(S(e)){const t=M[i];t&&(e=t(e,r)),e.sort(F)}return e}))};var E=r(8587),D=r(7599);const U="menu-item",J={fontWeight:"bold",fontSize:"16px"},L={color:"#f44336",paddingLeft:12},K={position:"relative",color:"#607d8b",padding:"8px 0 4px 32px",cursor:"pointer"},Y=(0,n.g2)(8,16),Z=U+" "+n.eT,R={padding:8,cursor:"pointer"},V=Object.assign({},R,{paddingLeft:12}),X=e=>{let{refEl:t,title:r,onClick:s}=e;return(0,j.jsxs)("div",Object.assign({},(0,D._s)(s,"0"),{ref:t,className:U,style:K,children:[r,(0,j.jsx)("span",{style:Y,children:"<"})]}))};var q=r(3375);const z=e=>{let{refEl:t,item:r,onClick:s}=e;const{text:n,type:i}=r,[o,l]=(e=>"l"===e?[U,V]:[Z,R])(i);return(0,j.jsx)("div",Object.assign({},(0,D._s)(s,"0"),{ref:t,className:o,style:l,children:n}))},B=[],Q=(0,s.ph)((e=>{let{refFirstItem:t,model:r=B,fOnClickItem:n}=e;const i=(e=>{const t=(0,s.NT)(f);return(0,s.Kr)((()=>t?e.filter(t):e),[t,e])})(r);return(0,j.jsx)("div",{children:i.map(((e,r)=>(0,j.jsx)(z,{refEl:0===r?t:void 0,item:e,onClick:n(e)},e.id)))})})),W=e=>{let{errMsg:t}=e;return t?(0,j.jsx)("div",{style:L,children:t}):null},G=e=>{let{refFirstItem:t,model:r,fOnClickItem:s,errMsg:n}=e;return(0,j.jsxs)(j.Fragment,{children:[!(r||n)&&(0,j.jsx)(q.yX,{}),(0,j.jsx)(Q,{refFirstItem:t,model:r,fOnClickItem:s}),(0,j.jsx)(W,{errMsg:n})]})},H=Array.isArray,$=(e,t,r,n,i,o,l)=>{const{text:a,id:c,type:d}=l,p=((e,t,r)=>"SDN"===e.lT?r||t:t?t+"/"+r:r)(r,t,c);return"l"===d?(0,s.Jr)(i,p,a,n):o(Object.assign({id:p},r,{text:a,proxy:e}))},ee=e=>{let{style:t,title:r,id:n="",dfProps:i={},pageNumber:o,pageCurrent:l,onClickPrev:a,onClickNext:c,fOnClickItem:d,loadItems:p,getProxy:g}=e;const u=(0,s.li)(),x=(0,s.li)(),[f,m]=(0,s.J0)({}),{model:h,errMsg:y}=f,v=g(i.lT),C=(0,s.hb)((0,s.Jr)($,v,n,i,o,c,d),[v]),b=0!==o&&r&&a,T=o===l&&(b||!b&&h);return(0,s.vJ)((()=>(r&&p(v,i,n).then((e=>{const t=H(e)?{model:e}:{errMsg:"Response is not array"};m(t)})).catch((e=>m({errMsg:e.message}))),()=>{clearTimeout((0,s.ZC)(x)),(0,s.nl)(u,null)})),[]),(0,s.vJ)((()=>{T&&(clearTimeout((0,s.ZC)(x)),(0,s.nl)(x,setTimeout((()=>{(0,s.ZI)(u)}),350)))}),[T]),(0,j.jsxs)("div",{style:Object.assign({},J,t),children:[b&&(0,j.jsx)(X,{refEl:u,title:r,onClick:(0,s.Jr)(a,o)}),(0,j.jsx)(G,{refFirstItem:b?void 0:u,model:h,fOnClickItem:C,errMsg:y})]})};var te=r(3569);const re=["pages","onClickPrev"],se=e=>{let{pages:t,onClickPrev:r}=e,s=(0,E.A)(e,re);return t.map(((e,t)=>(0,te.createElement)(ee,Object.assign({},s,e,{key:e.id,pageNumber:t,onClickPrev:0===t?void 0:r}))))},ne=300,ie={width:ne,overflow:"hidden"},oe=Object.assign({width:1500,overflowX:"hidden"},n.sT,{flexFlow:"row nowrap",alignItems:"flex-start",transition:"all .3s ease-out"}),le={width:ne},ae=e=>{let{dfProps:t,getProxy:r}=e;const[{pageCurrent:i,pages:o},l]=(0,s.J0)({pageCurrent:0,pages:[{id:"",title:"Menu"}]}),a=(0,b.A)((e=>{l((t=>{const{pageCurrent:r}=t;return 0===r||r!==e?t:Object.assign({},t,{pageCurrent:e-1})}))})),c=(0,b.A)(((e,t,r)=>{l((s=>{const{pageCurrent:n,pages:i}=s;if(r!==n)return s;const o=r+1,{id:l}=i[o]||{};return e&&l!==e&&(i.splice(o),i.push({id:e,title:t})),{pages:i,pageCurrent:r+1}}))}),[a]),d=Object.assign({},oe,(0,n.gT)(ne,i+1));return(0,j.jsx)("div",{style:ie,children:(0,j.jsx)("div",{style:d,children:(0,j.jsx)(se,{pages:o,pageCurrent:i,style:le,dfProps:t,onClickPrev:a,onClickNext:c,loadItems:_,fOnClickItem:w,getProxy:r})})})},ce=(0,n.nV)(),de={paddingLeft:6},pe={position:"relative",top:-4},ge={position:"relative",top:-3,paddingLeft:4},ue={height:"92%"},xe=(0,s.ph)((e=>{const{caption:t}=e,[r,n,l]=(0,i.A)(e),[a,c]=(0,o.eY)(),[d,m]=(0,o.eY)(),h=(0,s.Kr)((()=>p(d,e.dfProps.lT)),[d]);return(0,j.jsx)(f.Provider,{value:h,children:(0,j.jsxs)(g.A,{isShow:r,onKeyDown:l,children:[(0,j.jsx)(C,{isShow:a,toggleFilter:m,onClose:c}),(0,j.jsx)(u.A,{style:de,caption:t,captionStyle:ge,svgMoreStyle:pe,onMore:c,onClose:n}),(0,j.jsx)(x.A,{className:ce,style:ue,children:(0,j.jsx)(ae,Object.assign({},e))})]})})}))}}]);