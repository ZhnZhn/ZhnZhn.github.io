"use strict";(self.webpackChunkweb_app_erc=self.webpackChunkweb_app_erc||[]).push([[360],{8304:(e,t,r)=>{r.r(t),r.d(t,{default:()=>me});var n=r(8504),s=r(4760),o=r(8544),l=r(312);let i;const a=e=>{const t=parseInt((""+e.updated).trim().slice(0,4),10);return"number"!=typeof(r=t)||r-r!=0||(i||(i=(new Date).getUTCFullYear()))-t<3;var r},c=e=>e.active,d=(e,t)=>e?"SDN"===t?c:a:void 0;var p=r(8272),u=r(4864),m=r(8108);const g=(0,n.GY)();var x=r(20),f=r(6460),y=r(7624);const h={width:240,paddingBottom:8},v=e=>{let{is:t,toggleMenu:r,toggleFilter:n}=e;return(0,y.jsx)(x.c,{isShow:t,className:"popup-menu charts__menu-more",style:h,onClose:r,children:(0,y.jsx)(f.c,{caption:"Filter Not Active Topic",onToggle:n})})};var C=r(4756),j=r(4504);const $={dialogConf:!0,dialogType:"DialogStatN",dialogProps:{chartsType:"t2ae",dfProps:{}}},k=Object.assign,b=e=>{const t=e.text||"";return{menuTitle:t.slice(0,27),contFullCaption:`${e.sP}: ${r=t,r.length>35?r.slice(0,35)+"...":r}`};var r},I=e=>()=>{const{rootUrl:t,id:r,proxy:n,bT:s,lT:o,dU:l,noTime:i,dS:a}=e,c=(e=>{let{rootDimUrl:t,rootUrl:r,id:n,proxy:s="",dfDimQuery:o=""}=e;return`${s}${t||r}/${n}${o}`})(e),d=k({},$,{type:`${s}_${r}`,...b(e)});k(d.dialogProps,{loadId:o,descrUrl:l,dataSource:a,dfProps:{dimUrl:c,baseMeta:t,dfId:r,proxy:n,noTime:i}}),(0,j.S2)(`${s}_${r}`,s,d)},T=Array.isArray,w=(e,t)=>{const r=[];return e.forEach((e=>{e.id!==t&&(e.text=e.description,(e.hasSubjects||(e=>{let{tables:t}=e;return T(t)&&0===t.length})(e))&&(e.type="l"),r.push(e))})),r},P=(e,t)=>{const r=e[0];return 0!==(r.tables||[]).length?r.tables.map((e=>(e.text=`${e.id}: ${e.text}, ${e.firstPeriod||""}-${e.latestPeriod||""}`,e))):0!==(r.subjects||[]).length?w(r.subjects,t):w(e,t)},S=e=>(e.forEach((e=>{"t"===e.type&&(e.text=`${e.id}: ${e.text}`)})),e),M=Array.isArray,N=(e,t)=>e.text<t.text?-1:e.text>t.text?1:0,F={SDN:P,SIR:S},D=function(e,t,r){void 0===e&&(e="");const{rootUrl:n,dfTi:s="",lT:o}=t;return fetch(`${e}${n}/${r}${s}`,{cache:"default"}).then((e=>e.json())).then((e=>{if(M(e)){const t=F[o];t&&(e=t(e,r)),e.sort(N)}return e}))};var B=r(9124);const U="menu-item",_={fontWeight:"bold",fontSize:"16px"},A={color:"#f44336",paddingLeft:12},K={position:"relative",color:"#607d8b",padding:"8px 0 4px 32px",cursor:"pointer"},O={position:"absolute",top:8,left:16},Q=`${U} ${s.m0}`,R={padding:8,cursor:"pointer"},L={...R,paddingLeft:12},Y=e=>{let{innerRef:t,title:r,onClick:n}=e;const s=(0,B.W)(n);return(0,y.jsxs)("div",{ref:t,className:U,style:K,role:"menuitem",tabIndex:"0",onClick:n,onKeyDown:s,children:[r,(0,y.jsx)("span",{style:O,children:"<"})]})};var E=r(5128);const W=e=>{let{innerRef:t,item:r,onClick:n}=e;const{text:s,type:o}=r,[l,i]=(e=>"l"===e?[U,L]:[Q,R])(o),a=(0,B.W)(n,[n]);return(0,y.jsx)("div",{ref:t,className:l,style:i,tabIndex:"0",role:"menuitem",onClick:n,onKeyDown:a,children:s})},G=[],X=(0,n.sl)((e=>{let{refFirstItem:t,model:r=G,fOnClickItem:s}=e;const o=(e=>{const t=(0,n.Co)(g);return(0,n.bB)((()=>t?e.filter(t):e),[t,e])})(r);return(0,y.jsx)("div",{children:o.map(((e,r)=>(0,y.jsx)(W,{innerRef:0===r?t:void 0,item:e,onClick:s(e)},e.id)))})})),z=e=>{let{errMsg:t}=e;return t?(0,y.jsx)("div",{style:A,children:t}):null},Z=e=>{let{refFirstItem:t,model:r,fOnClickItem:n,errMsg:s}=e;return(0,y.jsxs)(y.Fragment,{children:[!(r||s)&&(0,y.jsx)(E.M$,{}),(0,y.jsx)(X,{refFirstItem:t,model:r,fOnClickItem:n}),(0,y.jsx)(z,{errMsg:s})]})},q=Array.isArray,H=(e,t,r,s,o,l,i)=>{const{text:a,id:c,type:d}=i,p=((e,t,r)=>"SDN"===e.lT?r||t:t?`${t}/${r}`:r)(r,t,c);return"l"===d?(0,n.sn)(o,p,a,s):l({id:p,...r,text:a,proxy:e})},J=e=>{let{style:t,title:r,id:s="",dfProps:o={},pageNumber:l,pageCurrent:i,onClickPrev:a,onClickNext:c,fOnClickItem:d,loadItems:p,getProxy:u}=e;const m=(0,n.yK)(),g=(0,n.yK)(),[x,f]=(0,n.oT)({}),{model:h,errMsg:v}=x,C=u(o.lT),j=(0,n.kZ)((0,n.sn)(H,C,s,o,l,c,d),[C]),$=0!==l&&r&&a,k=l===i&&($||!$&&h);return(0,n.YB)((()=>(r&&p(C,o,s).then((e=>{const t=q(e)?{model:e}:{errMsg:"Response is not array"};f(t)})).catch((e=>f({errMsg:e.message}))),()=>{clearTimeout((0,n.sB)(g)),(0,n.mQ)(m,null)})),[]),(0,n.YB)((()=>{k&&(clearTimeout((0,n.sB)(g)),(0,n.mQ)(g,setTimeout((()=>{(0,n.S4)(m)}),1e3)))}),[k]),(0,y.jsxs)("div",{style:{..._,...t},children:[$&&(0,y.jsx)(Y,{innerRef:m,title:r,onClick:(0,n.sn)(a,l)}),(0,y.jsx)(Z,{refFirstItem:$?void 0:m,model:h,fOnClickItem:j,errMsg:v})]})};var V=r(8160);const ee=e=>{let{pages:t,onClickPrev:r,...n}=e;return t.map(((e,t)=>(0,V.createElement)(J,{...n,...e,key:e.id,pageNumber:t,onClickPrev:0===t?void 0:r})))},te=300,re={width:te,overflow:"hidden"},ne={width:1500,overflowX:"hidden",display:"flex",flexFlow:"row nowrap",alignItems:"flex-start",transition:"all 750ms ease-out"},se={width:te},oe=e=>{const t=e.style.transform.trim().slice(11).replace("px","").replace(")","");return parseInt(t,10)},le={pageCurrent:0,pages:[{id:"",title:"Menu"}]},ie=e=>{let{dfProps:t,getProxy:r}=e;const s=(0,n.yK)(),o=(0,n.yK)(0),[{pageCurrent:l,pages:i},a]=(0,n.oT)(le),c=(0,C.c)((e=>{a((t=>{const{pageCurrent:r}=t;return 0===r||r!==e||(0,n.mQ)(o,-1),{...t,pageCurrent:e-1}}))})),d=(0,C.c)(((e,t,r)=>{a((s=>{const{pageCurrent:l,pages:i}=s;if(r!==l)return s;const a=r+1,{id:c}=i[a]||{};return e&&c!==e&&(i.splice(a),i.push({id:e,title:t})),(0,n.mQ)(o,1),{pages:i,pageCurrent:r+1}}))}),[c]),p=((e,t)=>{const r=(0,n.sB)(e),s=(0,n.sB)(t),o=0!==s&&r?((0,n.mQ)(t,0),oe(r)-1*s*te):0===s&&r?oe(r):0;return{...ne,transform:`translateX(${o}px)`}})(s,o);return(0,y.jsx)("div",{style:re,children:(0,y.jsx)("div",{ref:s,style:p,children:(0,y.jsx)(ee,{pages:i,pageCurrent:l,style:se,dfProps:t,onClickPrev:c,onClickNext:d,loadItems:D,fOnClickItem:I,getProxy:r})})})},ae=(0,s.G)(),ce={paddingLeft:6},de={position:"relative",top:-4},pe={position:"relative",top:-3,paddingLeft:4},ue={height:"92%"},me=(0,n.sl)((e=>{const{caption:t}=e,[r,s,i]=(0,o.c)(e),[a,c]=(0,l.c)(),[x,f]=(0,l.c)(),h=(0,n.bB)((()=>d(x,e.dfProps.lT)),[x]);return(0,y.jsx)(g.Provider,{value:h,children:(0,y.jsxs)(p.c,{isShow:r,onKeyDown:i,children:[(0,y.jsx)(v,{is:a,toggleMenu:c,toggleFilter:f}),(0,y.jsx)(u.c,{style:ce,caption:t,captionStyle:pe,svgMoreStyle:de,onMore:c,onClose:s}),(0,y.jsx)(m.c,{className:ae,style:ue,children:(0,y.jsx)(ie,{...e})})]})})}))}}]);