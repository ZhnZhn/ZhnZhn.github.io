"use strict";(self.webpackChunkweb_app_erc=self.webpackChunkweb_app_erc||[]).push([[538],{3217:(e,t,o)=>{o.d(t,{default:()=>_t});var r=o(3730),n=o(2296);const a="World",s="0",i=a+" ("+s+")",l="all",c="netWgt",p="qty",u="avgPerWeight",d="avgPerQuantity",h={marginTop:42,marginBottom:38},g={type:"spline"},m={type:"spline",visible:!1},v={type:"category",opposite:!1,labels:{y:18},crosshair:null,tickColor:"gray",tickWidth:3,tickLength:7,tickPosition:"outside",gridLineWidth:0},f={lineWidth:0,tickLength:0,startOnTick:!0,endOnTick:!0,minPadding:.05,maxPadding:.05,plotLines:null,labels:{x:3}};var A=o(6460),w=o(2823),y=o(5856),C=o(6327),S=o(8849);const x=(0,o(9550).z)("Website UN Comtrade Data","https://comtradeplus.un.org/TradeFlow/"),b=(e,t)=>t.period?t.subtitle+x():""+x(),j=()=>Object.create(null),T=e=>"AG2"===e.two,P=e=>Math.round((e||{}).primaryValue||0)||0,L=e=>{const{cmdCode:t}=e||{};return(t||"").length<4?t:(0,n.Ax)(t)},W=e=>(0,n.Ax)((e||{}).cmdDescE),z=e=>t=>{return o=(t||{})[e],(0,r.Et)(o)?""+o:(0,n.Ax)(o);var o},E=z("partnerCode"),O=z("reporterCode"),M=z("period"),V=e=>e&&(e.partnerCode===e.partner2Code||0===e.partner2Code);let I;const N=e=>I||((0,r.Ep)(e)?(I=e.reduce(((e,t)=>(t&&t.v&&t.v.length<4&&t.c&&(e[t.v]=(0,n.Ax)(t.c).replace("("+t.v+")","").trim()),e)),j()),I):j()),k=(e,t)=>{const o=E(t);return e[o]||o},D=(e,t)=>{const o=O(t);return e[o]||o},F=(e,t,o)=>{const n=[],a=N(t.tradePartners),i=((e,t)=>{const o=(r=e.one,n=e.tfType,"0"===r||"t1"===n?D:k);var r,n;return(e,r,n)=>t(e,o(r,n),n)})(t,o);let l=0,c=0;return e.data.forEach((e=>{const o=P(e),p=E(e);t.one!==s&&p===s&&V(e)?l=o:(0,r.F5)(o)&&V(e)&&(c+=o,n.push(i(o,a,e)))})),[n,l||c]},U=e=>{let{title:t}=e;return t},q=(e,t,o)=>{e.subtitle=(0,w.OJ)(e.subtitle,(0,w.j0)("("+t+"%,",o+"%)"))},R=e=>{let{value:t,rg:o=2,measure:r,tp:n,freq:a,chart:s,time:i}=e;return(0,w.ib)(t,o,r,n,a,s,i)},Q=(e,t)=>({frequency:t.period||("M"===t.freq?"Monthly":"Annual"),description:b(0,t)}),Y=function(e,t){let{itemValue:o,isWi:r=!0}=void 0===t?{}:t;const n=R(e);return{id:n,key:n,itemCaption:e.oneC,itemValue:o&&(0,y.A)(o),itemTime:e.time,isWithoutIndicator:r,dataSource:e.dataSource}},B="X",J="primaryValue",_="partner2Code=0",G=(e,t,o,r,n)=>e+"https://comtradeapi.un.org/public/v1/preview/C/A/HS/?motCode=0&customsCode=C00&cmdCode="+o+"&flowCode="+r+"&period="+n+(e=>e===s?"":"&reporterCode="+e+"&"+_)(t),X={getRequestUrl(e){(e=>{if(e._isTs)throw new Error("ERR_10")})(e);const{one:t=s,rg:o=B}=e;return G(e.proxy,t,e.two,o,e.time)+((e,t)=>T(e)||t===s?"&partnerCode=0&"+_:"")(e,t)},checkResponse(e){if(e&&(0,r.Ep)(e.data))return e;const{error:t,message:o,statusCode:a}=e||{};if((0,r.O8)(t))throw(0,n.UE)("",t);if((0,r.O8)(o))throw(0,n.UE)("",429===a?a+": "+o.replace("in 1 seconds","in 1 minutes"):o);throw(0,n.UE)()},addPropsTo(e){const{one:t=s,v:o,rg:r=B,measure:a=J}=e;if(!t){const t=o.slice(3).split("_");(0,n.kp)(e,{one:t[0],two:t[1]})}(0,n.kp)(e,{rg:r,measure:a})}};var K=o(9270),H=o(4999),Z=o(5385);const $=(e,t,o)=>q(o,...(0,Z.KM)(e,t)),ee=(e,t,o)=>({value:e,label:t,title:M(o)}),te=(e,t)=>{const[o,n]=T(t)?((e,t)=>{const o=[];let n=0;return e.data.forEach((e=>{const t=P(e);(0,r.F5)(t)&&(n+=t,o.push({value:t,label:L(e)+" "+W(e),title:M(e)}))})),$(o,n,t),[o,n]})(e,t):((e,t)=>{const[o,r]=F(e,t,ee);return $(o,r,t),[o,r]})(e,t);return(0,K.A)((0,H.Qn)(o),(0,H.Kl)(U(t),t.subtitle),(0,H.YT)({info:Q(0,t),zhConfig:Y(t,{itemValue:n})}),H.qP)};var oe=o(124),re=o(7229);const ne=(e,t,o,r,n)=>{const a=U(t);return(0,K.A)((0,H.mw)("BAR",r),(0,H.Kl)(a,t.subtitle),(0,H.YT)({info:Q(0,t),zhConfig:Y(t,{itemValue:n,isWi:!1})}),(0,H.vt)(0,{data:o,name:a}),H.qP)},ae=(0,re.q)((()=>(0,oe.Ov)("./data/uncomtrade/hs-chapters.json"))),se=(e,t,o)=>{(0,S._u)(e),q(o,...(0,Z.FE)({data:e,total:t,propName:"y"}))},ie=(e,t)=>ae().then((o=>((e,t,o)=>{const n=!!e,a=[];let s=0;return t.data.forEach((t=>{const o=P(t);if((0,r.F5)(o)){const r=L(t),i=n&&e[r];s+=o,a.push({c:i?r+" "+i:r,y:o})}})),se(a,s,o),[a,(0,C.mm)(a),s]})(o,e,t))).then((o=>ne(e,t,...o))),le=(e,t)=>({y:e,c:t}),ce=(e,t)=>{const[o,r]=F(e,t,le);return se(o,r,t),ne(0,t,o,(0,C.mm)(o),r)},pe=(e,t)=>(T(t)?ie:ce)(e,t);var ue=o(4850),de=o(3069),he=o(2096),ge=o(5248),me=o(7294),ve=o(1852),fe=o(434);const Ae=()=>Object.create(null),we="primaryValue",ye=(e,t)=>({y:e,forSort:void 0!==t?t:e}),Ce=(e,t)=>{const o=t[e],r=0!==o?o:t.TradeValue?void 0:0;return ye(r)},Se=(0,ve.J)(Ce,c),xe=(0,ve.J)(Ce,p),be=(e,t)=>{const o=P(t),r=t[e],a=r&&null!=o?(0,n.W7)(o/r,2):void 0;return ye(a,r)},je=(0,ve.J)(be,c),Te=(0,ve.J)(be,p),Pe=(0,fe.j)({fDf:e=>e===we?e=>ye(P(e)):t=>ye(t[e]),[c]:Se,[p]:xe,[u]:je,[d]:Te}),Le=e=>{const t=e&&e.length;return t&&t>0?e[t-1].forSort:void 0},We=function(e,t,o){void 0===t&&(t="partnerCode"),void 0===o&&(o=we);const n=Ae(),a=Ae(),s=(e=>{const t=Pe[e]||Pe.fDf(e);return e=>Object.assign({name:e.period,c:e.period},t(e))})(o);let i;return e.forEach((e=>{if(i=s(e),null!=i.y){const o=e[t];void 0===n[o]&&(n[o]=[]),n[o].push(i);const r=e.period;void 0===a[r]&&(a[r]=r)}})),[n,(l=a,(0,r.Co)(l).map((e=>l[e])).sort())];var l},ze=(e,t)=>o=>{const{name:r}=o,a=e[r],s=a[a.length-1],i=s?(0,n.W7)(s.y/t*100,1)+"%":"";return Object.assign({},o,{name:i+" "+r})},Ee=(e,t)=>-1===e.indexOf(t),Oe=e=>{let t,o=0;for(t in e)if(Ee(t,", nes")&&Ee(t,a)){const r=e[t];o+=r[r.length-1].y}return o},Me=Object.assign,Ve=e=>({fillColor:e,lineColor:e,lineWidth:1,radius:4,symbol:"circle"}),Ie=e=>{let{config:t,hm:o,name:r,i:n,color:a,seriaOption:s,isShow:i=!1}=e;const{legend:l}=t.zhConfig,c=a||(0,he.v)(n),p={color:c,marker:Ve(c)},u=null!==s?i?Object.assign({},g,p):Object.assign({},m,p):null;(0,ge.M$)(t,o[r],n,r,u),l.push((0,me.f)(n,c,r,i))},Ne=e=>{let{config:t,hm:o,fromIndex:n}=e,a=n;(e=>(0,S.GY)((0,r.Co)(e).map((t=>({value:Le(e[t]),name:t})))))(o).forEach(((e,r)=>{if(r>=a){const r=e.name;Ie({config:t,hm:o,name:r,i:a,isShow:a<6}),a++}}))},ke=(e,t)=>(e||{}).period-(t||{}).period,De=(e,t,o)=>{const{data:n}=t,{one:s,measure:c}=o,p=s===l?"reporterCode":"partnerCode",[h,g]=We(n.sort(ke),p,c),m=N(o.tradePartners),v=(f=h,A=m,(0,r.Co)(f).reduce(((e,t)=>(e[A[t]||t]=f[t],e)),j()));var f,A;v[i]&&s!==l?(Ie({config:e,hm:v,i:0,name:i,color:"#7cb5ec",seriaOption:null,isShow:!0}),Ne({config:e,hm:v,fromIndex:1})):Ne({config:e,hm:v,fromIndex:0});const{legend:w}=e.zhConfig;e.zhConfig.legend=s===l?((e,t,o)=>{const r=Oe(t),n=ze(t,r);return 0!==r&&o!==u&&o!==d?e.map(n):e})(w,v,c):((e,t)=>{const o=t[a],r=o?o[o.length-1].y:Oe(t),n=ze(t,r);return 0!==r&&null!=r?e.map(n):e})(w,v),Me(e.xAxis,{categories:g})},Fe=e=>{const t=""+e,o=4===t.length?t:t.slice(0,4)+"-"+t.slice(4,6);return(0,n.cY)(o)},Ue=(e,t)=>{const o=((e,t)=>{const{title:o,subtitle:r}=t;return(0,K.A)((0,H.hN)(),(0,H.YT)({chart:h,xAxis:v,yAxis:f}),(0,H.Kl)(o,r),(0,H.PK)(de.Gr),(0,H.YT)({info:Q(0,t),zhConfig:Y(t)}),(0,H.$n)([],!0),H.qP)})(0,t);return De(o,e,t),1===(o.series||[]).length&&(e=>{const{series:t}=e,{data:o}=t[0],r=(o||[]).map((e=>[Fe(e.c),e.y]));t[0].data=r,t[0].type="spline",e.xAxis.categories=void 0,e.xAxis.type="datetime",e.tooltip=(0,ue.Gs)(de.BA),e.valueMoving=(0,n.Y1)(r),e.zhConfig.isWithoutIndicator=!1})(o),o},qe=e=>(t,o)=>({config:e(t,o)}),Re=e=>({toConfig:qe((0,C.vD)(e)?te:(0,C.s9)(e)?Ue:pe)});const Qe={api:X,adapter:(0,o(4514).GT)({getRoute:Re,crDfKey:R})};var Ye=o(1315),Be=o(2401),Je=o(4575),_e=o(4867),Ge=o(4250),Xe=o(3057),Ke=o(3416),He=o(2655),Ze=o(2357),$e=o(9759),et=o(9878),tt=o(5347),ot=o(8056),rt=o(5317),nt=o(3349),at=o(2867),st=o(4428);const it=function(e,t){void 0===t&&(t=0);const o=e[t];return[o,"Default: "+(0,Be.eW)(o)]};var lt=o(4848);const ct=[{c:"Export Value",v:{rg:"X",measure:"primaryValue"}},{c:"Export Weight",v:{rg:"X",measure:"netWgt"}},{c:"Export Quantity",v:{rg:"X",measure:"qty"}},{c:"Export Average Value Per Weight",v:{rg:"X",measure:"avgPerWeight"}},{c:"Export Average Value Per Quantity",v:{rg:"X",measure:"avgPerQuantity"}},{c:"Import Value",v:{rg:"M",measure:"primaryValue"}},{c:"Import Weight",v:{rg:"M",measure:"netWgt"}},{c:"Import Quantity",v:{rg:"M",measure:"qty"}},{c:"Import Average Value Per Weight",v:{rg:"M",measure:"avgPerWeight"}},{c:"Import Average Value Per Quantity",v:{rg:"M",measure:"avgPerQuantity"}}],[pt,ut]=it(ct),[dt={c:"World",v:"0"},ht]=it([{c:"World",v:"0"}]),gt=[{c:"Annual",v:"A"},{c:"Monthly",v:"M"}],[mt,vt]=it(gt),ft=(e,t)=>({caption:e,value:t}),At=[ft("Bar (60, 90): By Partners",A.zM),ft("Tree Map (60, 90): By Partners",A.uT),ft("Dots: By Partners",A.bR)],[wt,yt]=it(At),[Ct]=(0,st.A)("Y",2),[St,xt]=it(Ct,1),bt=e=>"./data/uncomtrade/"+e+".json",jt=(0,Je.A)((e=>{const{isShow:t,caption:o,oneURI:r,tpURI:n,dfProps:a,msgOnNotSelected:s,toTopLayer:i,loadFn:l,onLoad:c,onShow:p}=e,{dfId:u}=a||{},[d,h]=(0,Ye.J0)(wt),[g,m,v,f,A]=(0,Ke.A)(),[w,y,C,S,x,b]=(0,Xe.A)(e,{toggleInputs:m}),[j,T]=(0,_e.eY)(!0),[P,L]=(0,_e.eY)(!0),[W,z]=(0,_e.eY)(!1),E=(0,Ye.li)(),O=(0,Ye.li)(),M=(0,Ye.li)(),[V,I]=(0,Ge.NC)(dt,dt),[N,k]=(0,Ge.NC)(pt,pt),D=(0,Ge.NC)()[1],[F,U]=(0,Ge.NC)(St,St),[q,R]=(0,Ge.NC)(mt,mt),Q=(0,Ye.hb)((()=>{const t=(0,Ye.ZC)(O),{msg:o=[]}=t.getValidation(),r=I(),n=(0,Be.z)(r),a=D(),s=(0,Be.z)(a),i=R();if("all"===n&&"all"===s&&o.push("Query All to All is too complex"),"all"===n&&"M"===(0,Be.z)(i)&&o.push("Query All Monthly is too complex"),0===o.length){const{one:o,two:n}=t.getValues();c(l(e,Object.assign({},(0,Ye.y5)(M),{one:r,two:o,three:n,tradeFlow:k(),tradePartner:a,freq:i,chType:d,time:(0,Be.z)(U()),tradePartners:(0,Ye.UU)(E)})))}x(o)}),[d]);return(0,lt.jsxs)(He.A,{isShow:t,caption:o,menuModel:y,toTopLayer:i,onLoad:Q,onShow:p,onClose:b,children:[(0,lt.jsx)(et.A,{isShow:w,buttons:C}),(0,lt.jsx)(ot.A,{isShow:g,isShowLabels:f,configs:[["Heading",j,T],["Trade Flow",P,L],["Chart",W,z]],onToggleLabels:A,onClose:v}),(0,lt.jsx)(tt.A,{isShow:t,isShowLabels:f,uri:r,caption:"Reporter",placeholder:ht,onSelect:V}),(0,lt.jsx)(Ze.A,{isShow:!1,children:(0,lt.jsx)(tt.A,{refEl:E,isShowLabels:f,uri:n,caption:"Partner",placeholder:"Default: World"})}),(0,lt.jsx)(Ze.A,{isShow:j,children:(0,lt.jsx)(at.A,{refEl:O,isShow:t,isShowLabels:f,uri:bt(u),oneCaption:"Heading",twoCaption:"Subheading",msgOnNotSelected:s})}),(0,lt.jsx)(Ze.A,{isShow:P,children:(0,lt.jsx)(rt.A,{isShowLabels:f,caption:"Trade Flow",placeholder:ut,propCaption:"c",options:ct,onSelect:N})}),(0,lt.jsx)(Ze.A,{isShow:!1,children:(0,lt.jsx)(rt.A,{isShowLabels:f,caption:"Frequency",placeholder:vt,propCaption:"c",options:gt})}),(0,lt.jsx)(nt.A,{isShowChart:W,isShowDate:W,refSeriaColor:M,chartType:d,isShowLabels:f,chartOptions:At,chartDefault:yt,onSelectChart:h,dateDefault:xt,dateOptions:Ct,onSelectDate:F}),(0,lt.jsx)($e.A,{validationMessages:S})]})})),Tt=[{c:"Bar (60, 90): By Partners",v:A.zM},{c:"TreeMap (60, 90): By Partners",v:A.uT}],Pt=Tt,[Lt,Wt]=it(Tt),zt=(e,t)=>"0"===(0,Be.z)(e)&&"TOTAL"===(0,Be.z)(t)?Pt:Tt,Et=(e,t)=>{const[o,r]=(0,Ge.NC)(Lt,Lt),[n,a]=(0,Ye.J0)(!0),s=(0,Ye.hb)((e=>{o(e)}),[]),[i,l]=(0,Ye.J0)(!0),[c,p]=(0,Ye.J0)((()=>zt(e(),t()))),u=(0,Ye.hb)((()=>{const r=e(),n=t();var s,i;l((s=r,i=n,!("0"!==(0,Be.z)(s)&&"TOTAL"===(0,Be.z)(i)))),p((e=>{const t=zt(r,n);return t!==e&&(o(Lt),a(!0)),t}))}),[]);return[Wt,i,n,u,s,r,c]},[Ot={c:"World",v:"0"},Mt]=it([{c:"World",v:"0"}]),Vt=[{c:"Total of trade partner",v:"TOTAL"},{c:"All 2-digit HS commodities",v:"AG2"}],[It,Nt]=it(Vt),kt=(()=>{const e=[];for(let t=0;t<23;t++){const o=""+(2023-t);e.push({c:o,v:o})}return e})(),[Dt,Ft]=it(kt,1),Ut=[{c:"Export Value",v:{rg:"X",measure:"primaryValue"}},{c:"Import Value",v:{rg:"M",measure:"primaryValue"}}],[qt,Rt]=it(Ut),[Qt={c:"World",v:"0"},Yt]=it([{c:"World",v:"0"}]),Bt={c:"Annual",v:"A"},Jt=(0,Je.A)((e=>{const{isShow:t,caption:o,oneURI:r,tpURI:n,msgOnNotSelected:a,toTopLayer:s,loadFn:i,onLoad:l,onShow:c}=e,p=(0,Ye.li)(),[u,d,h,g,m]=(0,Ke.A)(),[v,f,A,w,y,C]=(0,Xe.A)(e,{toggleInputs:d}),[S,x]=(0,_e.eY)(!0),[b,j]=(0,Ge.NC)(Ot,Ot),[T,P]=(0,Ge.NC)(Qt,Qt),[L,W]=(0,Ge.NC)(It,It),[z,E,O,M,V,I,N]=Et(P,W),[k,D]=(0,Ge.NC)(qt,qt),[F,U]=(0,Ge.NC)(Dt,Dt),q=(0,Ye.hb)((e=>{T(e),M()}),[]),R=(0,Ye.hb)((e=>{L(e),M()}),[]),Q=(0,Ye.hb)((()=>{const t=j(),o=P(),r=D(),n=W(),s=I(),c=[];var u,d;t||c.push(a("Reporter")),(t&&"all"===(0,Be.z)(t)||(u=o,d=n,"all"===(0,Be.z)(u)&&"total"!==(0,Be.z)(d)))&&c.push("Query All is too complex"),t&&"0"===(0,Be.z)(t)&&"AG2"===(0,Be.z)(n)&&c.push("Query World by AG2 is too complex"),"t1"!==((0,Be.z)(r)||{}).tfType||"0"===(0,Be.z)(o)&&"SPLINE"!==(0,Be.z)(s)||c.push("Query trade flow calculated values is only for category charts of trade partner World"),0===c.length&&l(i(e,{one:t,three:n,tradeFlow:r,tradePartner:o,chart:s,chType:s,time:(0,Be.z)(U()),freq:Bt,tradePartners:(0,Ye.UU)(p)})),y(c)}),[]);return(0,lt.jsxs)(He.A,{isShow:t,caption:o,menuModel:f,toTopLayer:s,onLoad:Q,onShow:c,onClose:C,children:[(0,lt.jsx)(et.A,{isShow:v,buttons:A}),(0,lt.jsx)(ot.A,{isShow:u,isShowLabels:g,configs:[["Trade Flow",S,x]],onToggleLabels:m,onClose:h}),(0,lt.jsx)(tt.A,{isShow:t,isShowLabels:g,uri:r,caption:"Reporter",placeholder:Mt,onSelect:b}),(0,lt.jsx)(Ze.A,{isShow:S,children:(0,lt.jsx)(rt.A,{isShowLabels:g,caption:"Trade Flow",placeholder:Rt,propCaption:"c",options:Ut,onSelect:k})}),(0,lt.jsx)(Ze.A,{isShow:!1,children:(0,lt.jsx)(tt.A,{refEl:p,isShowLabels:g,uri:n,caption:"Partner",placeholder:Yt,onSelect:q})}),(0,lt.jsxs)(Ze.A,{isShow:!0,children:[(0,lt.jsx)(rt.A,{isShowLabels:g,caption:"Aggregation",placeholder:Nt,propCaption:"c",options:Vt,onSelect:R}),(0,lt.jsxs)(Ze.A,{isShow:E,children:[(0,lt.jsx)(rt.A,{isShowLabels:g,caption:"Chart",placeholder:z,propCaption:"c",options:N,onSelect:V}),(0,lt.jsx)(Ze.A,{isShow:O,children:(0,lt.jsx)(rt.A,{isShowLabels:g,caption:"For Date",placeholder:Ft,propCaption:"c",options:kt,onSelect:F})})]})]}),(0,lt.jsx)($e.A,{validationMessages:w})]})})),_t={_a:Qe,UnDialog5:jt,UnDialogAgg:Jt}},8056:(e,t,o)=>{o.d(t,{A:()=>l});var r=o(1315),n=o(8355),a=o(7212),s=o(8353),i=o(4848);const l=e=>(0,i.jsx)(n.f,Object.assign({},e,{children:t=>(0,r.lZ)(e.configs,((o,r)=>(0,i.jsx)(a.A,{refEl:r===e.configs.length-1?t:void 0,style:s.Zt,caption:o[0],initialValue:o[1],onToggle:o[2]},o[0])))}))}}]);