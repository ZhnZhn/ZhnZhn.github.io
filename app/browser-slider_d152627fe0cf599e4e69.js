"use strict";(self.webpackChunkweb_app_erc=self.webpackChunkweb_app_erc||[]).push([[577],{988:(e,t,r)=>{r.r(t),r.d(t,{default:()=>pe});var n=r(1315),s=r(4558),o=r(634),i=r(4867);let l;const a=e=>{const t=parseInt((""+e.updated).trim().slice(0,4),10);return"number"!=typeof(r=t)||r-r!=0||(l||(l=(new Date).getUTCFullYear()))-t<3;var r},d=e=>e.active,c=(e,t)=>e?"SDN"===t?d:a:void 0;var p=r(6752),u=r(2336),g=r(8203);const m=(0,n.q6)();var x=r(972),f=r(66),h=r(4848);const y={width:240,paddingBottom:8},v=e=>{let{is:t,toggleMenu:r,toggleFilter:n}=e;return(0,h.jsx)(x.A,{isShow:t,className:"popup-menu charts__menu-more",style:y,onClose:r,children:(0,h.jsx)(f.A,{caption:"Filter Not Active Topic",onToggle:n})})};var C=r(5032),j=r(4427);const $={dialogConf:!0,dialogType:"DialogStatN",dialogProps:{chartsType:"t2ae",dfProps:{}}},k=Object.assign,T=e=>{const t=e.text||"";return{menuTitle:t.slice(0,27),contFullCaption:`${e.sP}: ${r=t,r.length>35?r.slice(0,35)+"...":r}`};var r},b=e=>()=>{const{rootUrl:t,id:r,proxy:n,bT:s,lT:o,dU:i,noTime:l,dS:a}=e,d=(e=>{let{rootDimUrl:t,rootUrl:r,id:n,proxy:s="",dfDimQuery:o=""}=e;return`${s}${t||r}/${n}${o}`})(e),c=k({},$,{type:`${s}_${r}`,...T(e)});k(c.dialogProps,{loadId:o,descrUrl:i,dataSource:a,dfProps:{dimUrl:d,baseMeta:t,dfId:r,proxy:n,noTime:l}}),(0,j.ui)(`${s}_${r}`,s,c)},I=Array.isArray,w=(e,t)=>{const r=[];return e.forEach((e=>{e.id!==t&&(e.text=e.description,(e.hasSubjects||(e=>{let{tables:t}=e;return I(t)&&0===t.length})(e))&&(e.type="l"),r.push(e))})),r},P=(e,t)=>{const r=e[0];return 0!==(r.tables||[]).length?r.tables.map((e=>(e.text=`${e.id}: ${e.text}, ${e.firstPeriod||""}-${e.latestPeriod||""}`,e))):0!==(r.subjects||[]).length?w(r.subjects,t):w(e,t)},A=e=>(e.forEach((e=>{"t"===e.type&&(e.text=`${e.id}: ${e.text}`)})),e),N=Array.isArray,M=(e,t)=>e.text<t.text?-1:e.text>t.text?1:0,S={SDN:P,SIR:A},F=function(e,t,r){void 0===e&&(e="");const{rootUrl:n,dfTi:s="",lT:o}=t;return fetch(`${e}${n}/${r}${s}`,{cache:"default"}).then((e=>{const{status:t}=e;if(t>=200&&t<400)return e.json();throw 404===t?{message:"Items not found"}:{message:t+" "+e.statusText}})).then((e=>{if(N(e)){const t=S[o];t&&(e=t(e,r)),e.sort(M)}return e}))};var D=r(6736);const U="menu-item",_={fontWeight:"bold",fontSize:"16px"},J={color:"#f44336",paddingLeft:12},O={position:"relative",color:"#607d8b",padding:"8px 0 4px 32px",cursor:"pointer"},L=(0,s.g2)(8,16),R=`${U} ${s.eT}`,K={padding:8,cursor:"pointer"},E={...K,paddingLeft:12},Y=e=>{let{innerRef:t,title:r,onClick:n}=e;const s=(0,D.Ly)(n);return(0,h.jsxs)("div",{ref:t,className:U,style:O,role:"menuitem",tabIndex:"0",onClick:n,onKeyDown:s,children:[r,(0,h.jsx)("span",{style:L,children:"<"})]})};var Z=r(3375);const X=e=>{let{innerRef:t,item:r,onClick:n}=e;const{text:s,type:o}=r,[i,l]=(e=>"l"===e?[U,E]:[R,K])(o),a=(0,D.Ly)(n,[n]);return(0,h.jsx)("div",{ref:t,className:i,style:l,tabIndex:"0",role:"menuitem",onClick:n,onKeyDown:a,children:s})},q=[],z=(0,n.ph)((e=>{let{refFirstItem:t,model:r=q,fOnClickItem:s}=e;const o=(e=>{const t=(0,n.NT)(m);return(0,n.Kr)((()=>t?e.filter(t):e),[t,e])})(r);return(0,h.jsx)("div",{children:o.map(((e,r)=>(0,h.jsx)(X,{innerRef:0===r?t:void 0,item:e,onClick:s(e)},e.id)))})})),B=e=>{let{errMsg:t}=e;return t?(0,h.jsx)("div",{style:J,children:t}):null},Q=e=>{let{refFirstItem:t,model:r,fOnClickItem:n,errMsg:s}=e;return(0,h.jsxs)(h.Fragment,{children:[!(r||s)&&(0,h.jsx)(Z.yX,{}),(0,h.jsx)(z,{refFirstItem:t,model:r,fOnClickItem:n}),(0,h.jsx)(B,{errMsg:s})]})},V=Array.isArray,W=(e,t,r,s,o,i,l)=>{const{text:a,id:d,type:c}=l,p=((e,t,r)=>"SDN"===e.lT?r||t:t?`${t}/${r}`:r)(r,t,d);return"l"===c?(0,n.Jr)(o,p,a,s):i({id:p,...r,text:a,proxy:e})},G=e=>{let{style:t,title:r,id:s="",dfProps:o={},pageNumber:i,pageCurrent:l,onClickPrev:a,onClickNext:d,fOnClickItem:c,loadItems:p,getProxy:u}=e;const g=(0,n.li)(),m=(0,n.li)(),[x,f]=(0,n.J0)({}),{model:y,errMsg:v}=x,C=u(o.lT),j=(0,n.hb)((0,n.Jr)(W,C,s,o,i,d,c),[C]),$=0!==i&&r&&a,k=i===l&&($||!$&&y);return(0,n.vJ)((()=>(r&&p(C,o,s).then((e=>{const t=V(e)?{model:e}:{errMsg:"Response is not array"};f(t)})).catch((e=>f({errMsg:e.message}))),()=>{clearTimeout((0,n.ZC)(m)),(0,n.nl)(g,null)})),[]),(0,n.vJ)((()=>{k&&(clearTimeout((0,n.ZC)(m)),(0,n.nl)(m,setTimeout((()=>{(0,n.ZI)(g)}),350)))}),[k]),(0,h.jsxs)("div",{style:{..._,...t},children:[$&&(0,h.jsx)(Y,{innerRef:g,title:r,onClick:(0,n.Jr)(a,i)}),(0,h.jsx)(Q,{refFirstItem:$?void 0:g,model:y,fOnClickItem:j,errMsg:v})]})};var H=r(3569);const ee=e=>{let{pages:t,onClickPrev:r,...n}=e;return t.map(((e,t)=>(0,H.createElement)(G,{...n,...e,key:e.id,pageNumber:t,onClickPrev:0===t?void 0:r})))},te=300,re={width:te,overflow:"hidden"},ne={width:1500,overflowX:"hidden",display:"flex",flexFlow:"row nowrap",alignItems:"flex-start",transition:"all .3s ease-out"},se={width:te},oe=e=>{let{dfProps:t,getProxy:r}=e;const[{pageCurrent:o,pages:i},l]=(0,n.J0)({pageCurrent:0,pages:[{id:"",title:"Menu"}]}),a=(0,C.A)((e=>{l((t=>{const{pageCurrent:r}=t;return 0===r||r!==e?t:{...t,pageCurrent:e-1}}))})),d=(0,C.A)(((e,t,r)=>{l((n=>{const{pageCurrent:s,pages:o}=n;if(r!==s)return n;const i=r+1,{id:l}=o[i]||{};return e&&l!==e&&(o.splice(i),o.push({id:e,title:t})),{pages:o,pageCurrent:r+1}}))}),[a]),c={...ne,...(0,s.gT)(te,o+1)};return(0,h.jsx)("div",{style:re,children:(0,h.jsx)("div",{style:c,children:(0,h.jsx)(ee,{pages:i,pageCurrent:o,style:se,dfProps:t,onClickPrev:a,onClickNext:d,loadItems:F,fOnClickItem:b,getProxy:r})})})},ie=(0,s.nV)(),le={paddingLeft:6},ae={position:"relative",top:-4},de={position:"relative",top:-3,paddingLeft:4},ce={height:"92%"},pe=(0,n.ph)((e=>{const{caption:t}=e,[r,s,l]=(0,o.A)(e),[a,d]=(0,i.eY)(),[x,f]=(0,i.eY)(),y=(0,n.Kr)((()=>c(x,e.dfProps.lT)),[x]);return(0,h.jsx)(m.Provider,{value:y,children:(0,h.jsxs)(p.A,{isShow:r,onKeyDown:l,children:[(0,h.jsx)(v,{is:a,toggleMenu:d,toggleFilter:f}),(0,h.jsx)(u.A,{style:le,caption:t,captionStyle:de,svgMoreStyle:ae,onMore:d,onClose:s}),(0,h.jsx)(g.A,{className:ie,style:ce,children:(0,h.jsx)(oe,{...e})})]})})}))}}]);