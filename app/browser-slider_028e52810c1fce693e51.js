"use strict";(self.webpackChunkweb_app_erc=self.webpackChunkweb_app_erc||[]).push([[577],{988:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ge});var s=r(1315),n=r(4558),i=r(634),o=r(4867),l=r(3730);let a;const d=e=>{const t=(0,l.dw)((""+e.updated).trim().slice(0,4));return!(0,l.Et)(t)||(a||(a=(new Date).getUTCFullYear()))-t<3},c=e=>e.active,p=(e,t)=>e?"SDN"===t?c:d:void 0;var u=r(6752),g=r(2336),x=r(8203);const f=(0,s.q6)();var m=r(7438),h=r(7212),y=r(4848);const v={width:240,paddingBottom:8},C={padding:"12px 12px 0 12px"},j=e=>{let{is:t,toggleMenu:r,toggleFilter:s}=e;return(0,y.jsx)(m.A,{isShow:t,className:"charts__menu-more",style:v,onClose:r,children:(0,y.jsx)(h.A,{style:C,caption:"Filter Not Active Topic",onToggle:s})})};var $=r(5032),T=r(4427);const k={dialogConf:!0,dialogType:"DialogStatN",dialogProps:{chartsType:"t2ae",dfProps:{}}},w=Object.assign,P=e=>{const t=e.text||"";return{menuTitle:t.slice(0,27),contFullCaption:`${e.sP}: ${r=t,r.length>35?r.slice(0,35)+"...":r}`};var r},b=e=>()=>{const{rootUrl:t,id:r,proxy:s,bT:n,lT:i,dU:o,noTime:l,dS:a}=e,d=(e=>{let{rootDimUrl:t,rootUrl:r,id:s,proxy:n="",dfDimQuery:i=""}=e;return`${n}${t||r}/${s}${i}`})(e),c=w({},k,{type:`${n}_${r}`,...P(e)});w(c.dialogProps,{loadId:i,descrUrl:o,dataSource:a,dfProps:{dimUrl:d,baseMeta:t,dfId:r,proxy:s,noTime:l}}),(0,T.ui)(`${n}_${r}`,n,c)},I=Array.isArray,A=(e,t)=>{const r=[];return e.forEach((e=>{e.id!==t&&(e.text=e.description,(e.hasSubjects||(e=>{let{tables:t}=e;return I(t)&&0===t.length})(e))&&(e.type="l"),r.push(e))})),r},N=(e,t)=>{const r=e[0];return 0!==(r.tables||[]).length?r.tables.map((e=>(e.text=`${e.id}: ${e.text}, ${e.firstPeriod||""}-${e.latestPeriod||""}`,e))):0!==(r.subjects||[]).length?A(r.subjects,t):A(e,t)},M=e=>(e.forEach((e=>{"t"===e.type&&(e.text=`${e.id}: ${e.text}`)})),e),S=Array.isArray,F=(e,t)=>e.text<t.text?-1:e.text>t.text?1:0,_={SDN:N,SIR:M},D=function(e,t,r){void 0===e&&(e="");const{rootUrl:s,dfTi:n="",lT:i}=t;return fetch(`${e}${s}/${r}${n}`,{cache:"default"}).then((e=>{const{status:t}=e;if(t>=200&&t<400)return e.json();throw 404===t?{message:"Items not found"}:{message:t+" "+e.statusText}})).then((e=>{if(S(e)){const t=_[i];t&&(e=t(e,r)),e.sort(F)}return e}))};var U=r(7599);const J="menu-item",O={fontWeight:"bold",fontSize:"16px"},R={color:"#f44336",paddingLeft:12},E={position:"relative",color:"#607d8b",padding:"8px 0 4px 32px",cursor:"pointer"},L=(0,n.g2)(8,16),K=`${J} ${n.eT}`,Y={padding:8,cursor:"pointer"},Z={...Y,paddingLeft:12},X=e=>{let{innerRef:t,title:r,onClick:s}=e;return(0,y.jsxs)("div",{...(0,U._s)(s,"0"),ref:t,className:J,style:E,children:[r,(0,y.jsx)("span",{style:L,children:"<"})]})};var q=r(3375);const z=e=>{let{innerRef:t,item:r,onClick:s}=e;const{text:n,type:i}=r,[o,l]=(e=>"l"===e?[J,Z]:[K,Y])(i);return(0,y.jsx)("div",{...(0,U._s)(s,"0"),ref:t,className:o,style:l,children:n})},B=[],Q=(0,s.ph)((e=>{let{refFirstItem:t,model:r=B,fOnClickItem:n}=e;const i=(e=>{const t=(0,s.NT)(f);return(0,s.Kr)((()=>t?e.filter(t):e),[t,e])})(r);return(0,y.jsx)("div",{children:i.map(((e,r)=>(0,y.jsx)(z,{innerRef:0===r?t:void 0,item:e,onClick:n(e)},e.id)))})})),V=e=>{let{errMsg:t}=e;return t?(0,y.jsx)("div",{style:R,children:t}):null},W=e=>{let{refFirstItem:t,model:r,fOnClickItem:s,errMsg:n}=e;return(0,y.jsxs)(y.Fragment,{children:[!(r||n)&&(0,y.jsx)(q.yX,{}),(0,y.jsx)(Q,{refFirstItem:t,model:r,fOnClickItem:s}),(0,y.jsx)(V,{errMsg:n})]})},G=Array.isArray,H=(e,t,r,n,i,o,l)=>{const{text:a,id:d,type:c}=l,p=((e,t,r)=>"SDN"===e.lT?r||t:t?`${t}/${r}`:r)(r,t,d);return"l"===c?(0,s.Jr)(i,p,a,n):o({id:p,...r,text:a,proxy:e})},ee=e=>{let{style:t,title:r,id:n="",dfProps:i={},pageNumber:o,pageCurrent:l,onClickPrev:a,onClickNext:d,fOnClickItem:c,loadItems:p,getProxy:u}=e;const g=(0,s.li)(),x=(0,s.li)(),[f,m]=(0,s.J0)({}),{model:h,errMsg:v}=f,C=u(i.lT),j=(0,s.hb)((0,s.Jr)(H,C,n,i,o,d,c),[C]),$=0!==o&&r&&a,T=o===l&&($||!$&&h);return(0,s.vJ)((()=>(r&&p(C,i,n).then((e=>{const t=G(e)?{model:e}:{errMsg:"Response is not array"};m(t)})).catch((e=>m({errMsg:e.message}))),()=>{clearTimeout((0,s.ZC)(x)),(0,s.nl)(g,null)})),[]),(0,s.vJ)((()=>{T&&(clearTimeout((0,s.ZC)(x)),(0,s.nl)(x,setTimeout((()=>{(0,s.ZI)(g)}),350)))}),[T]),(0,y.jsxs)("div",{style:{...O,...t},children:[$&&(0,y.jsx)(X,{innerRef:g,title:r,onClick:(0,s.Jr)(a,o)}),(0,y.jsx)(W,{refFirstItem:$?void 0:g,model:h,fOnClickItem:j,errMsg:v})]})};var te=r(3569);const re=e=>{let{pages:t,onClickPrev:r,...s}=e;return t.map(((e,t)=>(0,te.createElement)(ee,{...s,...e,key:e.id,pageNumber:t,onClickPrev:0===t?void 0:r})))},se=300,ne={width:se,overflow:"hidden"},ie={width:1500,overflowX:"hidden",...n.sT,flexFlow:"row nowrap",alignItems:"flex-start",transition:"all .3s ease-out"},oe={width:se},le=e=>{let{dfProps:t,getProxy:r}=e;const[{pageCurrent:i,pages:o},l]=(0,s.J0)({pageCurrent:0,pages:[{id:"",title:"Menu"}]}),a=(0,$.A)((e=>{l((t=>{const{pageCurrent:r}=t;return 0===r||r!==e?t:{...t,pageCurrent:e-1}}))})),d=(0,$.A)(((e,t,r)=>{l((s=>{const{pageCurrent:n,pages:i}=s;if(r!==n)return s;const o=r+1,{id:l}=i[o]||{};return e&&l!==e&&(i.splice(o),i.push({id:e,title:t})),{pages:i,pageCurrent:r+1}}))}),[a]),c={...ie,...(0,n.gT)(se,i+1)};return(0,y.jsx)("div",{style:ne,children:(0,y.jsx)("div",{style:c,children:(0,y.jsx)(re,{pages:o,pageCurrent:i,style:oe,dfProps:t,onClickPrev:a,onClickNext:d,loadItems:D,fOnClickItem:b,getProxy:r})})})},ae=(0,n.nV)(),de={paddingLeft:6},ce={position:"relative",top:-4},pe={position:"relative",top:-3,paddingLeft:4},ue={height:"92%"},ge=(0,s.ph)((e=>{const{caption:t}=e,[r,n,l]=(0,i.A)(e),[a,d]=(0,o.eY)(),[c,m]=(0,o.eY)(),h=(0,s.Kr)((()=>p(c,e.dfProps.lT)),[c]);return(0,y.jsx)(f.Provider,{value:h,children:(0,y.jsxs)(u.A,{isShow:r,onKeyDown:l,children:[(0,y.jsx)(j,{is:a,toggleMenu:d,toggleFilter:m}),(0,y.jsx)(g.A,{style:de,caption:t,captionStyle:pe,svgMoreStyle:ce,onMore:d,onClose:n}),(0,y.jsx)(x.A,{className:ae,style:ue,children:(0,y.jsx)(le,{...e})})]})})}))}}]);