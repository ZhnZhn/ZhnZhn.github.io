"use strict";(self.webpackChunkweb_app_erc=self.webpackChunkweb_app_erc||[]).push([[538],{3217:(e,o,t)=>{t.r(o),t.d(o,{default:()=>Uo});var r=t(3730),n=t(2296);const a="World",s="0",i=`${a} (${s})`,l="all",c="netWgt",p="qty",d="avgPerWeight",u="avgPerQuantity",h={marginTop:42,marginBottom:38},g={type:"spline"},m={type:"spline",visible:!1},w={type:"category",opposite:!1,labels:{y:18},crosshair:null,tickColor:"gray",tickWidth:3,tickLength:7,tickPosition:"outside",gridLineWidth:0},S={lineWidth:0,tickLength:0,startOnTick:!0,endOnTick:!0,minPadding:.05,maxPadding:.05,plotLines:null,labels:{x:3}};var v=t(6460),f=t(2823),A=t(5856),C=t(6327),y=t(8849);const x=(0,t(9550).z)("Website UN Comtrade Data","https://comtradeplus.un.org/TradeFlow/"),b=(e,o)=>o.period?o.subtitle+x():""+x(),T=()=>Object.create(null),j=e=>"AG2"===e.two,L=e=>Math.round((e||{}).primaryValue||0)||0,W=e=>{const{cmdCode:o}=e||{};return(o||"").length<4?o:(0,n.Ax)(o)},P=e=>(0,n.Ax)((e||{}).cmdDescE),M=e=>o=>{return t=(o||{})[e],(0,r.Et)(t)?""+t:(0,n.Ax)(t);var t},z=M("partnerCode"),E=M("reporterCode"),I=M("period"),V=e=>e&&(e.partnerCode===e.partner2Code||0===e.partner2Code);let R;const D=e=>R||((0,r.Ep)(e)?(R=e.reduce(((e,o)=>(o&&o.v&&o.v.length<4&&o.c&&(e[o.v]=(0,n.Ax)(o.c).replace(`(${o.v})`,"").trim()),e)),T()),R):T()),O=(e,o)=>{const t=z(o);return e[t]||t},$=(e,o)=>{const t=E(o);return e[t]||t},N=(e,o,t)=>{const n=[],a=D(o.tradePartners),i=((e,o)=>{const t=(r=e.one,n=e.tfType,"0"===r||"t1"===n?$:O);var r,n;return(e,r,n)=>o(e,t(r,n),n)})(o,t);let l=0,c=0;return e.data.forEach((e=>{const t=L(e),p=z(e);o.one!==s&&p===s&&V(e)?l=t:(0,r.F5)(t)&&V(e)&&(c+=t,n.push(i(t,a,e)))})),[n,l||c]},k=e=>{let{title:o}=e;return o},F=(e,o,t)=>{e.subtitle=(0,f.OJ)(e.subtitle,(0,f.j0)(`(${o}%,`,`${t}%)`))},U=e=>{let{value:o,rg:t=2,measure:r,tp:n,freq:a,chart:s,time:i}=e;return(0,f.ib)(o,t,r,n,a,s,i)},q=(e,o)=>({frequency:o.period||("M"===o.freq?"Monthly":"Annual"),description:b(0,o)}),H=function(e,o){let{itemValue:t,isWi:r=!0}=void 0===o?{}:o;const n=U(e);return{id:n,key:n,itemCaption:e.oneC,itemValue:t&&(0,A.A)(t),itemTime:e.time,isWithoutIndicator:r,dataSource:e.dataSource}},Q="X",Y="primaryValue",B="partner2Code=0",J=(e,o,t,r,n)=>`${e}https://comtradeapi.un.org/public/v1/preview/C/A/HS/?motCode=0&customsCode=C00&cmdCode=${t}&flowCode=${r}&period=${n}${(e=>e===s?"":`&reporterCode=${e}&${B}`)(o)}`,_={getRequestUrl(e){(e=>{if(e._isTs)throw new Error("ERR_10")})(e);const{one:o=s,rg:t=Q}=e;return J(e.proxy,o,e.two,t,e.time)+((e,o)=>j(e)||o===s?`&partnerCode=0&${B}`:"")(e,o)},checkResponse(e){if(e&&(0,r.Ep)(e.data))return e;const{error:o,message:t,statusCode:a}=e||{};if((0,r.O8)(o))throw(0,n.UE)("",o);if((0,r.O8)(t))throw(0,n.UE)("",429===a?`${a}: ${t.replace("in 1 seconds","in 1 minutes")}`:t);throw(0,n.UE)()},addPropsTo(e){const{one:o=s,v:t,rg:r=Q,measure:a=Y}=e;if(!o){const o=t.slice(3).split("_");(0,n.kp)(e,{one:o[0],two:o[1]})}(0,n.kp)(e,{rg:r,measure:a})}};var G=t(9270),X=t(4999),K=t(5385);const Z=(e,o,t)=>F(t,...(0,K.KM)(e,o)),ee=(e,o,t)=>({value:e,label:o,title:I(t)}),oe=(e,o)=>{const[t,n]=j(o)?((e,o)=>{const t=[];let n=0;return e.data.forEach((e=>{const o=L(e);(0,r.F5)(o)&&(n+=o,t.push({value:o,label:W(e)+" "+P(e),title:I(e)}))})),Z(t,n,o),[t,n]})(e,o):((e,o)=>{const[t,r]=N(e,o,ee);return Z(t,r,o),[t,r]})(e,o);return(0,G.A)((0,X.Qn)(t),(0,X.Kl)(k(o),o.subtitle),(0,X.YT)({info:q(0,o),zhConfig:H(o,{itemValue:n})}),X.qP)};var te=t(124),re=t(7229);const ne=(e,o,t,r,n)=>{const a=k(o);return(0,G.A)((0,X.mw)("BAR",r),(0,X.Kl)(a,o.subtitle),(0,X.YT)({info:q(0,o),zhConfig:H(o,{itemValue:n,isWi:!1})}),(0,X.vt)(0,{data:t,name:a}),X.qP)},ae=(0,re.q)((()=>(0,te.Ov)("./data/uncomtrade/hs-chapters.json"))),se=(e,o,t)=>{(0,y._u)(e),F(t,...(0,K.FE)({data:e,total:o,propName:"y"}))},ie=(e,o)=>ae().then((t=>((e,o,t)=>{const n=!!e,a=[];let s=0;return o.data.forEach((o=>{const t=L(o);if((0,r.F5)(t)){const r=W(o),i=n&&e[r];s+=t,a.push({c:i?r+" "+i:r,y:t})}})),se(a,s,t),[a,(0,C.mm)(a),s]})(t,e,o))).then((t=>ne(e,o,...t))),le=(e,o)=>({y:e,c:o}),ce=(e,o)=>{const[t,r]=N(e,o,le);return se(t,r,o),ne(0,o,t,(0,C.mm)(t),r)},pe=(e,o)=>(j(o)?ie:ce)(e,o);var de=t(4850),ue=t(3069),he=t(2096),ge=t(5248),me=t(7294),we=t(1852),Se=t(434);const ve=()=>Object.create(null),fe="primaryValue",Ae=(e,o)=>({y:e,forSort:void 0!==o?o:e}),Ce=(e,o)=>{const t=o[e],r=0!==t?t:o.TradeValue?void 0:0;return Ae(r)},ye=(0,we.J)(Ce,c),xe=(0,we.J)(Ce,p),be=(e,o)=>{const t=L(o),r=o[e],a=r&&null!=t?(0,n.W7)(t/r,2):void 0;return Ae(a,r)},Te=(0,we.J)(be,c),je=(0,we.J)(be,p),Le=(0,Se.j)({fDf:e=>e===fe?e=>Ae(L(e)):o=>Ae(o[e]),[c]:ye,[p]:xe,[d]:Te,[u]:je}),We=e=>{const o=e&&e.length;return o&&o>0?e[o-1].forSort:void 0},Pe=function(e,o,t){void 0===o&&(o="partnerCode"),void 0===t&&(t=fe);const n=ve(),a=ve(),s=(e=>{const o=Le[e]||Le.fDf(e);return e=>({name:e.period,c:e.period,...o(e)})})(t);let i;return e.forEach((e=>{if(i=s(e),null!=i.y){const t=e[o];void 0===n[t]&&(n[t]=[]),n[t].push(i);const r=e.period;void 0===a[r]&&(a[r]=r)}})),[n,(l=a,(0,r.Co)(l).map((e=>l[e])).sort())];var l},Me=(e,o)=>t=>{const{name:r}=t,a=e[r],s=a[a.length-1],i=s?(0,n.W7)(s.y/o*100,1)+"%":"";return{...t,name:i+" "+r}},ze=(e,o)=>-1===e.indexOf(o),Ee=e=>{let o,t=0;for(o in e)if(ze(o,", nes")&&ze(o,a)){const r=e[o];t+=r[r.length-1].y}return t},Ie=Object.assign,Ve=e=>({fillColor:e,lineColor:e,lineWidth:1,radius:4,symbol:"circle"}),Re=e=>{let{config:o,hm:t,name:r,i:n,color:a,seriaOption:s,isShow:i=!1}=e;const{legend:l}=o.zhConfig,c=a||(0,he.v)(n),p={color:c,marker:Ve(c)},d=null!==s?i?{...g,...p}:{...m,...p}:null;(0,ge.M$)(o,t[r],n,r,d),l.push((0,me.f)(n,c,r,i))},De=e=>{let{config:o,hm:t,fromIndex:n}=e,a=n;(e=>(0,y.GY)((0,r.Co)(e).map((o=>({value:We(e[o]),name:o})))))(t).forEach(((e,r)=>{if(r>=a){const r=e.name;Re({config:o,hm:t,name:r,i:a,isShow:a<6}),a++}}))},Oe=(e,o)=>(e||{}).period-(o||{}).period,$e=(e,o,t)=>{const{data:n}=o,{one:s,measure:c}=t,p=s===l?"reporterCode":"partnerCode",[h,g]=Pe(n.sort(Oe),p,c),m=D(t.tradePartners),w=(S=h,v=m,(0,r.Co)(S).reduce(((e,o)=>(e[v[o]||o]=S[o],e)),T()));var S,v;w[i]&&s!==l?(Re({config:e,hm:w,i:0,name:i,color:"#7cb5ec",seriaOption:null,isShow:!0}),De({config:e,hm:w,fromIndex:1})):De({config:e,hm:w,fromIndex:0});const{legend:f}=e.zhConfig;e.zhConfig.legend=s===l?((e,o,t)=>{const r=Ee(o),n=Me(o,r);return 0!==r&&t!==d&&t!==u?e.map(n):e})(f,w,c):((e,o)=>{const t=o[a],r=t?t[t.length-1].y:Ee(o),n=Me(o,r);return 0!==r&&null!=r?e.map(n):e})(f,w),Ie(e.xAxis,{categories:g})},Ne=e=>{const o=""+e,t=4===o.length?o:o.slice(0,4)+"-"+o.slice(4,6);return(0,n.cY)(t)},ke=(e,o)=>{const t=((e,o)=>{const{title:t,subtitle:r}=o;return(0,G.A)((0,X.hN)(),(0,X.YT)({chart:h,xAxis:w,yAxis:S}),(0,X.Kl)(t,r),(0,X.PK)(ue.Gr),(0,X.YT)({info:q(0,o),zhConfig:H(o)}),(0,X.$n)([],!0),X.qP)})(0,o);return $e(t,e,o),1===(t.series||[]).length&&(e=>{const{series:o}=e,{data:t}=o[0],r=(t||[]).map((e=>[Ne(e.c),e.y]));o[0].data=r,o[0].type="spline",e.xAxis.categories=void 0,e.xAxis.type="datetime",e.tooltip=(0,de.Gs)(ue.BA),e.valueMoving=(0,n.Y1)(r),e.zhConfig.isWithoutIndicator=!1})(t),t},Fe=e=>(o,t)=>({config:e(o,t)}),Ue=e=>({toConfig:Fe((0,C.vD)(e)?oe:(0,C.s9)(e)?ke:pe)});const qe={api:_,adapter:(0,t(4514).GT)({getRoute:Ue,crDfKey:U})};var He=t(1315),Qe=t(2401),Ye=t(4575),Be=t(9495),Je=t(4867),_e=t(4250),Ge=t(7474),Xe=t(3057),Ke=t(6318),Ze=t(8056),eo=t(4428);const oo=function(e,o){void 0===o&&(o=0);const t=e[o];return[t,`Default: ${(0,Qe.eW)(t)}`]};var to=t(4848);const ro=[{c:"Export Value",v:{rg:"X",measure:"primaryValue"}},{c:"Export Weight",v:{rg:"X",measure:"netWgt"}},{c:"Export Quantity",v:{rg:"X",measure:"qty"}},{c:"Export Average Value Per Weight",v:{rg:"X",measure:"avgPerWeight"}},{c:"Export Average Value Per Quantity",v:{rg:"X",measure:"avgPerQuantity"}},{c:"Import Value",v:{rg:"M",measure:"primaryValue"}},{c:"Import Weight",v:{rg:"M",measure:"netWgt"}},{c:"Import Quantity",v:{rg:"M",measure:"qty"}},{c:"Import Average Value Per Weight",v:{rg:"M",measure:"avgPerWeight"}},{c:"Import Average Value Per Quantity",v:{rg:"M",measure:"avgPerQuantity"}}],[no,ao]=oo(ro),[so={c:"World",v:"0"},io]=oo([{c:"World",v:"0"}]),lo=[{c:"Annual",v:"A"},{c:"Monthly",v:"M"}],[co,po]=oo(lo),uo=(e,o)=>({caption:e,value:o}),ho=[uo("Bar (60, 90): By Partners",v.zM),uo("Tree Map (60, 90): By Partners",v.uT),uo("Dots: By Partners",v.bR)],[go,mo]=oo(ho),[wo]=(0,eo.A)("Y",2),[So,vo]=oo(wo,1),fo=e=>`./data/uncomtrade/${e}.json`,Ao=(0,Ye.A)((e=>{const{isShow:o,caption:t,oneURI:r,tpURI:n,dfProps:a,msgOnNotSelected:s,toTopLayer:i,loadFn:l,onLoad:c,onShow:p}=e,{dfId:d}=a||{},[u,h]=(0,He.J0)(go),[g,m,w]=(0,Be.R)(),[S,v]=(0,Ge.A)(),[f,A,C,y,x,b]=(0,Xe.A)(e,{toggleInputs:m}),[T,j]=(0,Je.eY)(!0),[L,W]=(0,Je.eY)(!0),[P,M]=(0,Je.eY)(!1),z=(0,He.li)(),E=(0,He.li)(),I=(0,He.li)(),[V,R]=(0,_e.NC)(so,so),[D,O]=(0,_e.NC)(no,no),$=(0,_e.NC)()[1],[N,k]=(0,_e.NC)(So,So),[F,U]=(0,_e.NC)(co,co),q=(0,He.hb)((()=>{const o=(0,He.ZC)(E),{msg:t=[]}=o.getValidation(),r=R(),n=(0,Qe.z)(r),a=$(),s=(0,Qe.z)(a),i=U();if("all"===n&&"all"===s&&t.push("Query All to All is too complex"),"all"===n&&"M"===(0,Qe.z)(i)&&t.push("Query All Monthly is too complex"),0===t.length){const{one:t,two:n}=o.getValues();c(l(e,{...(0,He.y5)(I),one:r,two:t,three:n,tradeFlow:O(),tradePartner:a,freq:i,chType:u,time:(0,Qe.z)(k()),tradePartners:(0,He.UU)(z)}))}x(t)}),[u]);return(0,to.jsxs)(Ke.A.DraggableDialog,{isShow:o,caption:t,menuModel:A,toTopLayer:i,onLoad:q,onShow:p,onClose:b,children:[(0,to.jsx)(Ke.A.Toolbar,{isShow:f,buttons:C}),(0,to.jsx)(Ze.A,{isShow:g,isShowLabels:S,configs:[["Heading",T,j],["Trade Flow",L,W],["Chart",P,M]],onToggleLabels:v,onClose:w}),(0,to.jsx)(Ke.A.SelectWithLoad,{isShow:o,isShowLabels:S,uri:r,caption:"Reporter",placeholder:io,onSelect:V}),(0,to.jsx)(Ke.A.ShowHide,{isShow:!1,children:(0,to.jsx)(Ke.A.SelectWithLoad,{refEl:z,isShowLabels:S,uri:n,caption:"Partner",placeholder:"Default: World"})}),(0,to.jsx)(Ke.A.ShowHide,{isShow:T,children:(0,to.jsx)(Ke.A.SelectOneTwo,{refEl:E,isShow:o,isShowLabels:S,uri:fo(d),oneCaption:"Heading",twoCaption:"Subheading",msgOnNotSelected:s})}),(0,to.jsx)(Ke.A.ShowHide,{isShow:L,children:(0,to.jsx)(Ke.A.RowInputSelect,{isShowLabels:S,caption:"Trade Flow",placeholder:ao,propCaption:"c",options:ro,onSelect:D})}),(0,to.jsx)(Ke.A.ShowHide,{isShow:!1,children:(0,to.jsx)(Ke.A.RowInputSelect,{isShowLabels:S,caption:"Frequency",placeholder:po,propCaption:"c",options:lo})}),(0,to.jsx)(Ke.A.RowChartDate,{isShowChart:P,isShowDate:P,refSeriaColor:I,chartType:u,isShowLabels:S,chartOptions:ho,chartDefault:mo,onSelectChart:h,dateDefault:vo,dateOptions:wo,onSelectDate:N}),(0,to.jsx)(Ke.A.ValidationMessages,{validationMessages:y})]})})),Co=[{c:"Bar (60, 90): By Partners",v:v.zM},{c:"TreeMap (60, 90): By Partners",v:v.uT}],yo=Co,[xo,bo]=oo(Co),To=(e,o)=>"0"===(0,Qe.z)(e)&&"TOTAL"===(0,Qe.z)(o)?yo:Co,jo=(e,o)=>{const[t,r]=(0,_e.NC)(xo,xo),[n,a]=(0,He.J0)(!0),s=(0,He.hb)((e=>{t(e)}),[]),[i,l]=(0,He.J0)(!0),[c,p]=(0,He.J0)((()=>To(e(),o()))),d=(0,He.hb)((()=>{const r=e(),n=o();var s,i;l((s=r,i=n,!("0"!==(0,Qe.z)(s)&&"TOTAL"===(0,Qe.z)(i)))),p((e=>{const o=To(r,n);return o!==e&&(t(xo),a(!0)),o}))}),[]);return[bo,i,n,d,s,r,c]},[Lo={c:"World",v:"0"},Wo]=oo([{c:"World",v:"0"}]),Po=[{c:"Total of trade partner",v:"TOTAL"},{c:"All 2-digit HS commodities",v:"AG2"}],[Mo,zo]=oo(Po),Eo=(()=>{const e=[];for(let o=0;o<23;o++){const t=""+(2023-o);e.push({c:t,v:t})}return e})(),[Io,Vo]=oo(Eo,1),Ro=[{c:"Export Value",v:{rg:"X",measure:"primaryValue"}},{c:"Import Value",v:{rg:"M",measure:"primaryValue"}}],[Do,Oo]=oo(Ro),[$o={c:"World",v:"0"},No]=oo([{c:"World",v:"0"}]),ko={c:"Annual",v:"A"},Fo=(0,Ye.A)((e=>{const{isShow:o,caption:t,oneURI:r,tpURI:n,msgOnNotSelected:a,toTopLayer:s,loadFn:i,onLoad:l,onShow:c}=e,p=(0,He.li)(),[d,u,h]=(0,Be.R)(),[g,m]=(0,Ge.A)(),[w,S,v,f,A,C]=(0,Xe.A)(e,{toggleInputs:u}),[y,x]=(0,Je.eY)(!0),[b,T]=(0,_e.NC)(Lo,Lo),[j,L]=(0,_e.NC)($o,$o),[W,P]=(0,_e.NC)(Mo,Mo),[M,z,E,I,V,R,D]=jo(L,P),[O,$]=(0,_e.NC)(Do,Do),[N,k]=(0,_e.NC)(Io,Io),F=(0,He.hb)((e=>{j(e),I()}),[]),U=(0,He.hb)((e=>{W(e),I()}),[]),q=(0,He.hb)((()=>{const o=T(),t=L(),r=$(),n=P(),s=R(),c=[];var d,u;o||c.push(a("Reporter")),(o&&"all"===(0,Qe.z)(o)||(d=t,u=n,"all"===(0,Qe.z)(d)&&"total"!==(0,Qe.z)(u)))&&c.push("Query All is too complex"),o&&"0"===(0,Qe.z)(o)&&"AG2"===(0,Qe.z)(n)&&c.push("Query World by AG2 is too complex"),"t1"!==((0,Qe.z)(r)||{}).tfType||"0"===(0,Qe.z)(t)&&"SPLINE"!==(0,Qe.z)(s)||c.push("Query trade flow calculated values is only for category charts of trade partner World"),0===c.length&&l(i(e,{one:o,three:n,tradeFlow:r,tradePartner:t,chart:s,chType:s,time:(0,Qe.z)(k()),freq:ko,tradePartners:(0,He.UU)(p)})),A(c)}),[]);return(0,to.jsxs)(Ke.A.DraggableDialog,{isShow:o,caption:t,menuModel:S,toTopLayer:s,onLoad:q,onShow:c,onClose:C,children:[(0,to.jsx)(Ke.A.Toolbar,{isShow:w,buttons:v}),(0,to.jsx)(Ze.A,{isShow:d,isShowLabels:g,configs:[["Trade Flow",y,x]],onToggleLabels:m,onClose:h}),(0,to.jsx)(Ke.A.SelectWithLoad,{isShow:o,isShowLabels:g,uri:r,caption:"Reporter",placeholder:Wo,onSelect:b}),(0,to.jsx)(Ke.A.ShowHide,{isShow:y,children:(0,to.jsx)(Ke.A.RowInputSelect,{isShowLabels:g,caption:"Trade Flow",placeholder:Oo,propCaption:"c",options:Ro,onSelect:O})}),(0,to.jsx)(Ke.A.ShowHide,{isShow:!1,children:(0,to.jsx)(Ke.A.SelectWithLoad,{refEl:p,isShowLabels:g,uri:n,caption:"Partner",placeholder:No,onSelect:F})}),(0,to.jsxs)(Ke.A.ShowHide,{isShow:!0,children:[(0,to.jsx)(Ke.A.RowInputSelect,{isShowLabels:g,caption:"Aggregation",placeholder:zo,propCaption:"c",options:Po,onSelect:U}),(0,to.jsxs)(Ke.A.ShowHide,{isShow:z,children:[(0,to.jsx)(Ke.A.RowInputSelect,{isShowLabels:g,caption:"Chart",placeholder:M,propCaption:"c",options:D,onSelect:V}),(0,to.jsx)(Ke.A.ShowHide,{isShow:E,children:(0,to.jsx)(Ke.A.RowInputSelect,{isShowLabels:g,caption:"For Date",placeholder:Vo,propCaption:"c",options:Eo,onSelect:N})})]})]}),(0,to.jsx)(Ke.A.ValidationMessages,{validationMessages:f})]})})),Uo={_a:qe,UnDialog5:Ao,UnDialogAgg:Fo}},8056:(e,o,t)=>{t.d(o,{A:()=>c});var r=t(1315),n=t(972),a=t(9757),s=t(6223),i=t(8353),l=t(4848);const c=e=>{let{isShow:o,isShowLabels:t,configs:c,onToggleLabels:p,onClose:d}=e;return(0,l.jsxs)(n.A,{isShow:o,style:i.lM,onClose:d,children:[(0,l.jsx)(a.A,{value:t,onToggle:p}),(0,r.lZ)(c,(e=>(0,l.jsx)(s.A,{style:{...i.v$,...i.Mc},caption:e[0],value:e[1],onToggle:e[2]},e[0])))]})}}}]);